"use strict";(self.webpackChunkfeedback_loop_client=self.webpackChunkfeedback_loop_client||[]).push([[813],{5813:(It,f,r)=>{r.r(f),r.d(f,{ViewEntityModule:()=>Et});var u=r(914),t=r(5e3),m=r(2626),A=r(3616),S=r(6819),y=r(6832),x=r(4419),k=r(3455),O=r(8793),V=r(7465),C=r(6335),w=r(6101),v=r(9033),J=r(5319),Q=r(9565),c=r(9352),I=r(4817),d=r(9808),U=r(4112),P=r(7797),N=r(4933),T=r(4770),b=r(6762),M=r(5405),q=r(5499),E=r(2382);function Y(i,a){if(1&i&&t._UZ(0,"app-req-list-item",17),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("request",n.getRequestList(e))}}function j(i,a){if(1&i&&t._UZ(0,"app-task-list-item",18),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("flTask",n.getTaskList(e))}}function L(i,a){if(1&i&&t._UZ(0,"app-milestone-card",19),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("flMilestone",n.getMilestoneList(e))}}function z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",10)(2,"div",11)(3,"input",12),t.NdJ("click",function(s){const l=t.CHM(e).$implicit;return t.oxw().selecting(l.id,s)}),t.qZA()(),t.TgZ(4,"div",13),t.YNc(5,Y,1,1,"app-req-list-item",14),t.YNc(6,j,1,1,"app-task-list-item",15),t.YNc(7,L,1,1,"app-milestone-card",16),t.qZA()()()}if(2&i){const e=a.$implicit,n=t.oxw();t.xp6(3),t.Q6J("checked",n.selected.includes(e.id?e.id:-1)),t.xp6(2),t.Q6J("ngIf","request"==n.type),t.xp6(1),t.Q6J("ngIf","task"==n.type),t.xp6(1),t.Q6J("ngIf","milestone"==n.type)}}let F=(()=>{class i{constructor(e,n,s,o,l,p,_){this.route=e,this.requestQuery=n,this.taskQuery=s,this.milestoneQuery=o,this.requestService=l,this.taskService=p,this.milestoneService=_,this.selected=[],this.closed=new t.vpe,this.selectedList=new t.vpe}ngOnInit(){}ngAfterContentInit(){"request"===this.type?(this.requestService.getall(),this.list=this.requestQuery.$requests):"task"===this.type?(this.taskService.getall(),this.list=this.taskQuery.$tasks):"milestone"===this.type&&(this.milestoneService.getall(),this.list=this.milestoneQuery.$milestones),this.preSelected&&(this.selected=[...this.preSelected])}selecting(e,n){if(e)if(n.target.checked)this.multiSelect?this.selected.push(e):this.selected=[e];else{let s=this.selected.indexOf(e);this.selected.splice(s,1)}}pickSelectedRequest(){if(this.selected.length>0)this.selectedList.emit(this.multiSelect?this.selected:this.selected[0]);else{let e;this.multiSelect&&(e=this.selected),this.selectedList.emit(e)}this.close()}close(){this.closed.emit(!1)}getRequestList(e){return e}getTaskList(e){return e}getMilestoneList(e){return e}creatingNew(){this.sourceId&&this.route.navigate([`/${this.type}/new`],{queryParams:{id:this.sourceId}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(y.Z),t.Y36(x.R),t.Y36(k.l),t.Y36(C.P),t.Y36(w.Y),t.Y36(v.l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-associate"]],inputs:{preSelected:["preselect","preSelected"],multiSelect:"multiSelect",sourceId:"sourceId",type:"type"},outputs:{closed:"closed",selectedList:"selectedList"},decls:16,vars:5,consts:[[1,"body"],[1,"header"],[1,"search-container"],[1,"icon-div",3,"click"],[1,"material-symbols-rounded"],[1,"am-demo-bd"],[2,"border-bottom","1px solid #ddd"],[3,"placeholder","maxLength"],[1,"main"],[4,"ngFor","ngForOf"],[1,"option-card"],[1,"checkbox-container"],["type","checkbox",3,"checked","click"],[1,"element-container"],[3,"request",4,"ngIf"],[3,"flTask",4,"ngIf"],[3,"flMilestone",4,"ngIf"],[3,"request"],[3,"flTask"],[3,"flMilestone"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.NdJ("click",function(){return n.close()}),t.TgZ(4,"span",4),t._uU(5," close "),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6),t._UZ(8,"SearchBar",7),t.qZA()(),t.TgZ(9,"div",3),t.NdJ("click",function(){return n.pickSelectedRequest()}),t.TgZ(10,"span",4),t._uU(11," done "),t.qZA()()()(),t.TgZ(12,"div",8)(13,"List"),t.YNc(14,z,8,4,"div",9),t.ALo(15,"async"),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("placeholder","Search")("maxLength",20),t.xp6(6),t.Q6J("ngForOf",t.lcZ(15,3,n.list)))},directives:[c.NB,c.ns,d.sg,d.O5,M.U,b.T,q.T],pipes:[d.Ov],styles:[".body[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;grid-template-columns:1fr;height:100%;position:relative}.search-container[_ngcontent-%COMP%]{height:50px;width:100%;display:grid;grid-template-columns:50px auto 50px;align-items:center;background-color:#fff}.header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.main[_ngcontent-%COMP%]{overflow-y:auto;height:100%}.icon-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.option-card[_ngcontent-%COMP%]{display:flex;text-align:start;padding:0 10px}.checkbox-container[_ngcontent-%COMP%]{padding:13px 12px 0 5px}.checkbox-container[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:20px;height:20px}.element-container[_ngcontent-%COMP%]{flex:1}.button[_ngcontent-%COMP%]{margin-left:17px;cursor:pointer}"]}),i})();var H=r(5513);function $(i,a){1&i&&(t.TgZ(0,"span",33),t._uU(1," arrow_back "),t.qZA())}const Z=function(i){return{opacity:i}};function R(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateEntity()}),t._uU(1,"Update"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("type","primary")("disabled",e.canUpdateEntity())("ngStyle",t.VKq(5,Z,e.canUpdateEntity()?1:.5))("inline",!0)("size","small")}}function B(i,a){if(1&i&&t.YNc(0,R,2,7,"div",34),2&i){const e=t.oxw();t.Q6J("ngIf",e.canUserEdit())}}function D(i,a){if(1&i&&(t.TgZ(0,"header",36)(1,"div",37)(2,"span",38),t._UZ(3,"img",39),t.qZA(),t.TgZ(4,"div",40)(5,"span",41),t._uU(6),t.qZA(),t._UZ(7,"WhiteSpace",42),t.TgZ(8,"span",13),t._uU(9),t.ALo(10,"date"),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("src",e.createdUser.picture,t.LSH),t.xp6(3),t.hij(" ",e.createdUser.name," "),t.xp6(1),t.Q6J("size","xs"),t.xp6(2),t.hij(" ",t.xi3(10,4,e.entityObj.createdAt,"h:mm a . MMM d, y")," ")}}function W(i,a){if(1&i&&t._UZ(0,"div",45),2&i){const e=t.oxw(2);t.Q6J("MarkdownContentParser",e.request.content)}}function K(i,a){if(1&i&&t._UZ(0,"div",45),2&i){const e=t.oxw(2);t.Q6J("MarkdownContentParser",e.task.content)}}function X(i,a){if(1&i&&t._UZ(0,"div",45),2&i){const e=t.oxw(2);t.Q6J("MarkdownContentParser",e.milestone.content)}}function G(i,a){if(1&i&&(t.TgZ(0,"div",43),t.YNc(1,W,1,1,"div",44),t.YNc(2,K,1,1,"div",44),t.YNc(3,X,1,1,"div",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","request"===e.entity),t.xp6(1),t.Q6J("ngIf","task"===e.entity),t.xp6(1),t.Q6J("ngIf","milestone"===e.entity)}}function tt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"markdown-editor",47),t.NdJ("selectedMention",function(s){return t.CHM(e),t.oxw(2).getMention(s)})("jsonContentChange",function(s){return t.CHM(e),t.oxw(2).request.content=s})("content",function(s){return t.CHM(e),t.oxw(2).request.rawContent=s.raw})("selectedTag",function(s){return t.CHM(e),t.oxw(2).getTag(s)}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("tagArray",e.global.requestTagArray)("mentionArray",e.global.mentionArray)("enableMenu",!1)("jsonContent",e.request.content)}}function et(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"markdown-editor",47),t.NdJ("selectedMention",function(s){return t.CHM(e),t.oxw(2).getMention(s)})("jsonContentChange",function(s){return t.CHM(e),t.oxw(2).task.content=s})("content",function(s){return t.CHM(e),t.oxw(2).task.rawContent=s.raw})("selectedTag",function(s){return t.CHM(e),t.oxw(2).getTag(s)}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("tagArray",e.global.taskTagArray)("mentionArray",e.global.mentionArray)("enableMenu",!1)("jsonContent",e.task.content)}}function it(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"markdown-editor",47),t.NdJ("selectedMention",function(s){return t.CHM(e),t.oxw(2).getMention(s)})("jsonContentChange",function(s){return t.CHM(e),t.oxw(2).milestone.content=s})("content",function(s){return t.CHM(e),t.oxw(2).milestone.rawContent=s.raw})("selectedTag",function(s){return t.CHM(e),t.oxw(2).getTag(s)}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("tagArray",e.global.tagArray)("mentionArray",e.global.mentionArray)("enableMenu",!1)("jsonContent",e.milestone.content)}}function nt(i,a){if(1&i&&(t.TgZ(0,"div",43),t.YNc(1,tt,1,4,"markdown-editor",46),t.YNc(2,et,1,4,"markdown-editor",46),t.YNc(3,it,1,4,"markdown-editor",46),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","request"===e.entity),t.xp6(1),t.Q6J("ngIf","task"===e.entity),t.xp6(1),t.Q6J("ngIf","milestone"===e.entity)}}function st(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",48)(1,"app-field-select",49),t.NdJ("defaultValueChange",function(s){return t.CHM(e),t.oxw().request.category=s}),t.qZA(),t.TgZ(2,"app-field-select",50),t.NdJ("defaultValueChange",function(s){return t.CHM(e),t.oxw().request.severity=s}),t.qZA(),t.TgZ(3,"app-field-select",51),t.NdJ("defaultValueChange",function(s){return t.CHM(e),t.oxw().request.module=s}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("options",e.fields.categories)("defaultValue",e.request.category),t.xp6(1),t.Q6J("options",e.fields.severities)("defaultValue",e.request.severity),t.xp6(1),t.Q6J("options",e.fields.modules)("defaultValue",e.request.module)}}function ot(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",48)(1,"app-field-select",52),t.NdJ("defaultValueChange",function(s){return t.CHM(e),t.oxw().task.priority=s}),t.qZA(),t.TgZ(2,"app-field-select",53),t.NdJ("defaultValueChange",function(s){return t.CHM(e),t.oxw().task.status=s}),t.qZA(),t.TgZ(3,"app-field-select",51),t.NdJ("defaultValueChange",function(s){return t.CHM(e),t.oxw().request.module=s}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("options",e.fields.taskPriorites)("defaultValue",e.task.priority),t.xp6(1),t.Q6J("options",e.fields.taskStatus)("defaultValue",e.task.status),t.xp6(1),t.Q6J("options",e.fields.modules)("defaultValue",e.request.module)}}function at(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",48)(1,"app-field-select",53),t.NdJ("defaultValueChange",function(s){return t.CHM(e),t.oxw().milestone.status=s}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("options",e.fields.taskStatus)("defaultValue",e.milestone.status)}}function rt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",54),t.NdJ("click",function(){return t.CHM(e),t.oxw().showDeleteAlert()}),t._UZ(1,"img",55),t.ALo(2,"categoryImgPath"),t.TgZ(3,"span",56),t._uU(4,"Delete"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("ngStyle",t.VKq(5,Z,e.canUserEdit()?1:.5))("nzPlacement","bottomLeft"),t.xp6(1),t.Q6J("src",t.lcZ(2,3,"delete.svg"),t.LSH)}}function ct(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",57),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(),o=t.MAs(29);return s.showEntityModal(o.selectedIndex)}),t._UZ(1,"img",58),t.ALo(2,"categoryImgPath"),t.TgZ(3,"span",59),t._uU(4,"Add"),t.qZA()()}2&i&&(t.xp6(1),t.Q6J("src",t.lcZ(2,1,"fl-add.png"),t.LSH))}function lt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"SwipeAction",62),t.NdJ("onOpen",function(){return t.CHM(e),t.oxw(2).swipeOpen()})("onClose",function(){return t.CHM(e),t.oxw(2).swipeClose()}),t._UZ(1,"app-task-list-item",63),t.qZA()}if(2&i){const e=a.$implicit,n=t.oxw(2);t.Q6J("autoClose",!0)("right",n.rightSwipeAction),t.xp6(1),t.Q6J("disabled",!1)("size","min")("flTask",e)}}function dt(i,a){if(1&i&&(t.TgZ(0,"div",60),t.YNc(1,lt,2,5,"SwipeAction",61),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.taskQuery.selectMany(e.request.associatedTasks)))}}function pt(i,a){if(1&i&&t._UZ(0,"app-req-list-item",65),2&i){const e=a.$implicit;t.Q6J("disabled",!1)("size","min")("request",e)}}function _t(i,a){if(1&i&&(t.TgZ(0,"div",60),t.YNc(1,pt,1,3,"app-req-list-item",64),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.requestQuery.selectMany(e.task.requests)))}}function ut(i,a){if(1&i&&t._UZ(0,"app-milestone-card",67),2&i){const e=a.$implicit;t.Q6J("size","min")("flMilestone",e)}}const mt=function(i){return[i]};function gt(i,a){if(1&i&&(t.TgZ(0,"div",60),t.YNc(1,ut,1,2,"app-milestone-card",66),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.milestoneQuery.selectMany(t.VKq(3,mt,e.task.associatedMilestone))))}}function ht(i,a){if(1&i&&t._UZ(0,"app-task-list-item",63),2&i){const e=a.$implicit;t.Q6J("disabled",!1)("size","min")("flTask",e)}}function ft(i,a){if(1&i&&(t.TgZ(0,"div",60),t.YNc(1,ht,1,3,"app-task-list-item",68),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.taskQuery.selectMany(e.milestone.tasks)))}}function yt(i,a){1&i&&(t.TgZ(0,"span",69),t._uU(1," home "),t.qZA())}function xt(i,a){1&i&&(t.TgZ(0,"span",69),t._uU(1," task "),t.qZA())}function kt(i,a){1&i&&(t.TgZ(0,"span",69),t._uU(1," emoji_flags "),t.qZA())}function Ct(i,a){1&i&&(t.TgZ(0,"span",69),t._uU(1," person "),t.qZA())}function wt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"app-add-associate",70),t.NdJ("selectedList",function(s){return t.CHM(e),t.oxw().getSelectedRequest(s)})("closed",function(){return t.CHM(e),t.oxw().showRequestModel=!1}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("sourceId",e.getSourceId())("multiSelect",!0)("preselect",e.getEntityAssociaties("request"))("type","request")}}function vt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"app-add-associate",70),t.NdJ("selectedList",function(s){return t.CHM(e),t.oxw().getSelectedTask(s)})("closed",function(){return t.CHM(e),t.oxw().showTaskModel=!1}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("sourceId",e.getSourceId())("multiSelect",!0)("preselect",e.getEntityAssociaties("task"))("type","task")}}function Tt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"app-add-associate",70),t.NdJ("selectedList",function(s){return t.CHM(e),t.oxw().getSelectedMilestone(s)})("closed",function(){return t.CHM(e),t.oxw().showMilestoneModel=!1}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("sourceId",e.getSourceId())("multiSelect",!1)("preselect",e.getEntityAssociaties("milestone"))("type","milestone")}}let bt=(()=>{class i{constructor(e,n,s,o,l,p,_,g,h,Zt,At,St,Ot,Vt,Jt,Qt){this.activatedRoute=e,this.authQuery=n,this.userQuery=s,this.requestQuery=o,this.taskQuery=l,this.milestoneQuery=p,this.fields=_,this.global=g,this.requestService=h,this.taskService=Zt,this.milestoneService=At,this.userService=St,this.navigationService=Ot,this.notifier=Vt,this.modal=Jt,this.router=Qt,this.entity="",this.rightSwipeAction=[{text:" Remove ",onPress:()=>console.log("delete"),className:"del-associate-btn"}],this.request={},this.task={},this.milestone={},this.oldRequest={},this.oldTask={},this.oldMilestone={},this.entityObj={},this.showRequestModel=!1,this.showTaskModel=!1,this.showMilestoneModel=!1}ngOnInit(){this.activatedRoute.params.subscribe(e=>{e.entity&&e.id&&(this.entity=e.entity,this.getEntity(e.id))}),this.authSubscription=this.authQuery.$authUser.subscribe(e=>this.authUser=e)}getCreatedUser(e){this.userQuery.hasEntity(e)||this.userService.get(e).subscribe(),this.userSubscription=this.userQuery.selectEntity(e).subscribe(n=>{console.log(n),this.createdUser=n})}hasEntityInQuery(e,n){switch(e){case"request":this.requestQuery.hasEntity(n)||this.requestService.getOne(n);break;case"task":this.taskQuery.hasEntity(n)||this.taskService.getOne(n);break;case"milestone":this.milestoneQuery.hasEntity(n)||this.milestoneService.getOne(n);break;default:console.log("Unknown entity in hasEntityInQuery",e)}}getEntity(e){this.hasEntityInQuery(this.entity,e),"request"===this.entity?this.requestSubscription=this.requestQuery.selectEntity(e).subscribe(n=>{n?(console.log(n),this.request=Object.assign({},n),this.entityObj=Object.assign({},n),this.oldRequest=Object.assign({},n),this.request.createdByUser?this.getCreatedUser(this.request.createdByUser):this.requestService.getOne(e),this.request.associatedTasks&&this.request.associatedTasks.forEach(s=>{this.hasEntityInQuery("task",s)})):console.log(`No entity present for given id ${e}, entity ${this.entity}`)}):"task"===this.entity?this.taskSubscription=this.taskQuery.selectEntity(e).subscribe(n=>{n?(this.task=Object.assign({},n),this.oldTask=Object.assign({},n),this.entityObj=Object.assign({},n),this.task.createdByUser?this.getCreatedUser(this.task.createdByUser):this.taskService.getOne(e),this.task.requests&&this.task.requests.forEach(s=>{this.hasEntityInQuery("request",s)}),this.task.associatedMilestone&&this.hasEntityInQuery("milestone",this.task.associatedMilestone)):console.log(`No entity present for given id ${e}, entity ${this.entity}`)}):"milestone"===this.entity?this.milestoneSubscription=this.milestoneQuery.selectEntity(e).subscribe(n=>{n?(this.milestone=Object.assign({},n),this.oldMilestone=Object.assign({},n),this.entityObj=Object.assign({},n),this.milestone.createdByUser?this.getCreatedUser(this.milestone.createdByUser):this.milestoneService.getOne(e),this.milestone.tasks&&this.milestone.tasks.forEach(s=>{this.hasEntityInQuery("task",s)})):console.log(`No entity present for given id ${e}, entity ${this.entity}`)}):console.log("Unknown entity")}getTag(e){if("request"===this.entity)switch(e.type){case"Category":this.request.category=e.tag;break;case"Severity":this.request.severity=e.tag;break;case"Module":this.request.module=e.tag;break;default:console.log(`Unknown tag type in ${this.entity}: `,e.type)}else if("task"===this.entity)switch(e.type){case"Priority":this.task.priority=e.tag;break;case"Status":this.task.status=e.tag;break;default:console.log(`Unknown tag type in ${this.entity}: `,e.type)}else console.log("Unknown entity in getTag",this.entity,e)}getMention(e){console.log(e)}canUserEdit(){return!(!this.authUser||!this.createdUser)&&this.authUser.id===this.createdUser.id}isEntityUpdated(){return"request"===this.entity?JSON.stringify(this.request)!==JSON.stringify(this.oldRequest):"task"===this.entity?JSON.stringify(this.task)!==JSON.stringify(this.oldTask):"milestone"===this.entity&&JSON.stringify(this.milestone)!==JSON.stringify(this.oldMilestone)}canUpdateEntity(){return this.canUserEdit()&&this.isEntityUpdated()}updateEntity(){if(console.log("Coming to updateEntity"),this.canUpdateEntity()){switch(console.log("Coming to updateEntity passing return"),this.entity){case"request":null!=this.request&&null!=this.request.id&&(this.oldRequest=Object.assign({},this.request),null==this.request.associatedTasks&&(this.request.associatedTasks=[]),this.request.createdByUser=this.authQuery.user.id,this.requestService.updateRequest(this.request.id,this.request));break;case"task":console.log("Coming to updateEntity to task"),null!=this.task&&null!=this.task.id&&(this.oldTask=Object.assign({},this.task),null==this.task.requests&&(this.task.requests=null),null==this.task.associatedMilestone&&(this.task.associatedMilestone=null),console.log("Coming to updateEntity to task",this.task),this.taskService.updateTask(this.task.id,this.task));break;case"milestone":null!=this.milestone&&null!=this.milestone.id&&(this.oldMilestone=Object.assign({},this.milestone),this.milestoneService.updateMilestone(this.milestone.id,this.milestone))}this.notifierSubscription&&this.notifierSubscription.unsubscribe(),this.notifierSubscription=this.notifier.action$.pipe((0,u.vE)(`${this.entity.toLocaleLowerCase()}s`),(0,u.IY)("PUT")).subscribe(e=>{console.log(e),"request"===this.entity&&this.request&&this.request.id&&this.requestService.getOne(this.request.id),"task"===this.entity&&this.task&&this.task.id&&this.taskService.getOne(this.task.id),"milestone"===this.entity&&this.milestone&&this.milestone.id&&this.milestoneService.getOne(this.milestone.id)})}}swipeOpen(){console.log("SwipeOpen")}swipeClose(){console.log("SwipeClose")}getSelectedRequest(e){console.log(this.entity,"Selected Request",e),"task"===this.entity&&(this.task.requests=e)}getSelectedTask(e){switch(console.log(this.entity,"Selected Task",e),this.entity){case"request":this.request.associatedTasks=e;break;case"milestone":this.milestone.tasks=e}}getSelectedMilestone(e){console.log(this.entity,"Selected Milestone",e),"task"===this.entity&&(this.task.associatedMilestone=e)}getEntityAssociaties(e){if("request"===this.entity&&this.request){if("task"===e&&this.request.associatedTasks)return[...this.request.associatedTasks]}else if("task"===this.entity&&this.task){if("request"===e&&this.task.requests)return this.task.requests;if("milestone"===e&&this.task.associatedMilestone)return[this.task.associatedMilestone]}else if("milestone"===this.entity&&this.milestone&&"task"===e&&this.milestone.tasks)return this.milestone.tasks;return[]}getSourceId(){return this.entityObj.id}showEntityModal(e){switch(this.entity){case"request":case"milestone":this.showTaskModel=!0;break;case"task":0===e?this.showRequestModel=!0:1===e&&(this.showMilestoneModel=!0)}}getSegmentValues(){switch(this.entity){case"request":let e="Tasks (0)";return this.request.associatedTasks&&(e=`Tasks (${this.request.associatedTasks.length})`),[[e]];case"task":let n="Requests (0)",s="Milestone (0)";return this.task.requests&&(n=`Requests (${this.task.requests.length})`),this.task.associatedMilestone&&(s="Milestone (1)"),[[n],[s]];case"milestone":let o="Tasks (0)";return this.milestone.tasks&&(o=`Tasks (${this.milestone.tasks.length})`),[[o]]}return[]}showDeleteAlert(){this.modal.alert("Delete","Are you sure ?",[{text:"Cancel",onPress:()=>console.log("cancel"),style:{color:"var(--accent-text-color)",background:"var(--accent-bg-color)"}},{text:"OK",onPress:()=>this.deleteEntity(),style:{color:"var(--accent-text-color)",background:"var(--accent-bg-color)"}}],"android")}deleteEntity(){if(this.canUserEdit()){switch(this.entity){case"request":this.request.id&&this.requestService.deleteRequest(this.request.id);break;case"task":this.task.id&&this.taskService.deleteTask(this.task.id);break;case"milestone":this.milestone.id&&this.milestoneService.deleteMilestone(this.milestone.id)}this.notifierSubscription&&this.notifierSubscription.unsubscribe(),this.notifierSubscription=this.notifier.action$.pipe((0,u.vE)(`${this.entity.toLocaleLowerCase()}s`),(0,u.IY)("DELETE")).subscribe(e=>{this.navigationService.back()})}}tabBarTabOnPress(e){switch(this.global.selectedIndex=e.index,e.index){case 0:this.global.entity="Request",this.router.navigate(["home/requests"]);break;case 1:this.global.entity="Task",this.router.navigate(["home/tasks"]);break;case 2:this.global.entity="Milestone",this.router.navigate(["home/milestones"])}}ngOnDestroy(){this.requestSubscription&&this.requestSubscription.unsubscribe(),this.taskSubscription&&this.taskSubscription.unsubscribe(),this.milestoneSubscription&&this.milestoneSubscription.unsubscribe(),this.authSubscription&&this.authSubscription.unsubscribe(),this.notifierSubscription&&this.notifierSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.gz),t.Y36(A.i),t.Y36(S.o),t.Y36(y.Z),t.Y36(x.R),t.Y36(k.l),t.Y36(O.$),t.Y36(V.U),t.Y36(C.P),t.Y36(w.Y),t.Y36(v.l),t.Y36(J.T),t.Y36(Q.f),t.Y36(u.kt),t.Y36(c.Z7),t.Y36(m.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-entity"]],decls:55,vars:47,consts:[[1,"new-entity-container"],[3,"icon","mode","rightContent"],["nav_bar_arrow",""],["nav_bar_submit",""],[1,"nec-body"],[1,"nec-modal"],["model",""],["class","req-list-item-header",4,"ngIf"],[1,"nec-modal-body"],["class","nec-editor",4,"ngIf"],[1,"nec-modal-footer"],["class","first-element",4,"ngIf"],[1,"req-list-item-footer"],[1,"rlth-time-user"],["class","del-associate-btn add-associate-btn-border","nz-button","","nz-dropdown","",3,"ngStyle","nzPlacement","click",4,"ngIf"],[1,"associatedDiv"],[1,"nec-model-entities-div"],[1,"associate-div-segmented"],[1,"ad-segmented-control",3,"tintColor","values"],["taskSegment",""],["class","add-associate-btn","nz-button","",3,"click",4,"ngIf"],["class","nec-model-entity-container",4,"ngIf"],["tabBarPosition","bottom",1,"home-tab-bar",3,"activeTab","tintColor","unselectedTintColor","onPress"],["title","Home","key","1",3,"icon","selectedIcon"],["home_icon",""],["title","Tasks","key","2",3,"icon","selectedIcon"],["task_icon",""],["title","Milestones","key","3",3,"icon","selectedIcon"],["milestone_icon",""],["title","Account","key","4",3,"icon","selectedIcon"],["account_icon",""],[1,"modal",3,"ngModel","transparent","maskClosable","ngModelChange"],[3,"sourceId","multiSelect","preselect","type","selectedList","closed",4,"ngIf"],["appBackButton","",1,"material-symbols-rounded","button-icon"],["Button","","class","button-icon button-feel-accent","style","margin-right: 4px",3,"type","disabled","ngStyle","inline","size","click",4,"ngIf"],["Button","",1,"button-icon","button-feel-accent",2,"margin-right","4px",3,"type","disabled","ngStyle","inline","size","click"],[1,"req-list-item-header"],[1,"rlth-time"],[1,"material-symbols-rounded","rlth-time-icon"],["alt","",1,"rlth-time-icon",3,"src"],[1,"rlth-time-div"],[1,"rlth-time-text"],[3,"size"],[1,"nec-editor"],["class","req-list-item-container",3,"MarkdownContentParser",4,"ngIf"],[1,"req-list-item-container",3,"MarkdownContentParser"],["class","nec-markdown-editor","placeholder","Say Something",3,"tagArray","mentionArray","enableMenu","jsonContent","selectedMention","jsonContentChange","content","selectedTag",4,"ngIf"],["placeholder","Say Something",1,"nec-markdown-editor",3,"tagArray","mentionArray","enableMenu","jsonContent","selectedMention","jsonContentChange","content","selectedTag"],[1,"first-element"],["name","Category",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Severity",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Module",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Priority",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Status",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["nz-button","","nz-dropdown","",1,"del-associate-btn","add-associate-btn-border",3,"ngStyle","nzPlacement","click"],["alt","Add",1,"button-icon","del-associate-img",3,"src"],[1,"del-associate-text"],["nz-button","",1,"add-associate-btn",3,"click"],["alt","Add",1,"button-icon","add-associate-img",3,"src"],[1,"add-associate-text"],[1,"nec-model-entity-container"],["style","background-color: transparent; margin-top: 6px;",3,"autoClose","right","onOpen","onClose",4,"ngFor","ngForOf"],[2,"background-color","transparent","margin-top","6px",3,"autoClose","right","onOpen","onClose"],[1,"task-list-item",3,"disabled","size","flTask"],["class","task-list-item",3,"disabled","size","request",4,"ngFor","ngForOf"],[1,"task-list-item",3,"disabled","size","request"],["class","task-list-item",3,"size","flMilestone",4,"ngFor","ngForOf"],[1,"task-list-item",3,"size","flMilestone"],["class","task-list-item",3,"disabled","size","flTask",4,"ngFor","ngForOf"],[1,"material-symbols-rounded"],[3,"sourceId","multiSelect","preselect","type","selectedList","closed"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"Navbar",1),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.YNc(4,$,2,0,"ng-template",null,2,t.W1O),t.YNc(6,B,1,1,"ng-template",null,3,t.W1O),t.TgZ(8,"div",4)(9,"div",5,6),t.YNc(11,D,11,7,"header",7),t.TgZ(12,"div",8),t.YNc(13,G,4,3,"div",9),t.YNc(14,nt,4,3,"div",9),t.qZA(),t.TgZ(15,"div",10),t.YNc(16,st,4,6,"div",11),t.YNc(17,ot,4,6,"div",11),t.YNc(18,at,2,2,"div",11),t.TgZ(19,"footer",12)(20,"span",13),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"div",13),t.YNc(24,rt,5,7,"div",14),t.qZA()()()(),t.TgZ(25,"div",15)(26,"div",16)(27,"div",17),t._UZ(28,"SegmentedControl",18,19),t.TgZ(30,"div",13),t.YNc(31,ct,5,3,"div",20),t.qZA()(),t.YNc(32,dt,3,3,"div",21),t.YNc(33,_t,3,3,"div",21),t.YNc(34,gt,3,5,"div",21),t.YNc(35,ft,3,3,"div",21),t.qZA()()(),t.TgZ(36,"TabBar",22),t.NdJ("onPress",function(o){return n.tabBarTabOnPress(o)}),t.TgZ(37,"TabBarItem",23),t.YNc(38,yt,2,0,"ng-template",null,24,t.W1O),t.qZA(),t.TgZ(40,"TabBarItem",25),t.YNc(41,xt,2,0,"ng-template",null,26,t.W1O),t.qZA(),t.TgZ(43,"TabBarItem",27),t.YNc(44,kt,2,0,"ng-template",null,28,t.W1O),t.qZA(),t.TgZ(46,"TabBarItem",29),t.YNc(47,Ct,2,0,"ng-template",null,30,t.W1O),t.qZA()(),t.TgZ(49,"Modal",31),t.NdJ("ngModelChange",function(o){return n.showRequestModel=o}),t.YNc(50,wt,1,4,"app-add-associate",32),t.qZA(),t.TgZ(51,"Modal",31),t.NdJ("ngModelChange",function(o){return n.showTaskModel=o}),t.YNc(52,vt,1,4,"app-add-associate",32),t.qZA(),t.TgZ(53,"Modal",31),t.NdJ("ngModelChange",function(o){return n.showMilestoneModel=o}),t.YNc(54,Tt,1,4,"app-add-associate",32),t.qZA()()),2&e){const s=t.MAs(5),o=t.MAs(7),l=t.MAs(29),p=t.MAs(39),_=t.MAs(42),g=t.MAs(45),h=t.MAs(48);t.xp6(1),t.Q6J("icon",s)("mode","light")("rightContent",o),t.xp6(1),t.hij(" ",t.lcZ(3,42,n.entity)," "),t.xp6(9),t.Q6J("ngIf",n.createdUser),t.xp6(2),t.Q6J("ngIf",!n.canUserEdit()),t.xp6(1),t.Q6J("ngIf",n.canUserEdit()),t.xp6(2),t.Q6J("ngIf","request"===n.entity),t.xp6(1),t.Q6J("ngIf","task"===n.entity),t.xp6(1),t.Q6J("ngIf","milestone"===n.entity),t.xp6(3),t.hij(" Last Updated . ",t.xi3(22,44,n.entityObj.updatedAt,"h:mm a . MMM d, y")," "),t.xp6(3),t.Q6J("ngIf",n.canUserEdit()),t.xp6(4),t.Q6J("tintColor","#E9EDFF")("values",n.getSegmentValues()),t.xp6(3),t.Q6J("ngIf",n.canUserEdit()),t.xp6(1),t.Q6J("ngIf","request"===n.entity&&n.request.associatedTasks&&0===l.selectedIndex),t.xp6(1),t.Q6J("ngIf","task"===n.entity&&n.task.requests&&0===l.selectedIndex),t.xp6(1),t.Q6J("ngIf","task"===n.entity&&n.task.associatedMilestone&&1===l.selectedIndex),t.xp6(1),t.Q6J("ngIf","milestone"===n.entity&&n.milestone.tasks&&0===l.selectedIndex),t.xp6(1),t.Q6J("activeTab",n.global.selectedIndex)("tintColor","var(--accent-text-color)")("unselectedTintColor","var(--extra-dim-text-color)"),t.xp6(1),t.Q6J("icon",p)("selectedIcon",p),t.xp6(3),t.Q6J("icon",_)("selectedIcon",_),t.xp6(3),t.Q6J("icon",g)("selectedIcon",g),t.xp6(3),t.Q6J("icon",h)("selectedIcon",h),t.xp6(3),t.Q6J("ngModel",n.showRequestModel)("transparent",!0)("maskClosable",!0),t.xp6(1),t.Q6J("ngIf",n.showRequestModel),t.xp6(1),t.Q6J("ngModel",n.showTaskModel)("transparent",!0)("maskClosable",!0),t.xp6(1),t.Q6J("ngIf",n.showTaskModel),t.xp6(1),t.Q6J("ngModel",n.showMilestoneModel)("transparent",!0)("maskClosable",!0),t.xp6(1),t.Q6J("ngIf",n.showMilestoneModel)}},directives:[c.w5,I.z,d.O5,c.r0,d.PC,c.yG,U.J,P.k1,N.I,T.wA,T.cm,c.d5,d.sg,c.$n,b.T,M.U,q.T,c.pu,c._i,c.zS,E.JJ,E.On,F],pipes:[d.rS,d.uU,H.I,d.Ov],styles:[".new-entity-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:transparent;display:flex;flex-direction:column}.nec-body[_ngcontent-%COMP%]{width:100%;flex:1;overflow:scroll}.home-tab-bar[_ngcontent-%COMP%]{flex:1}.nec-loader[_ngcontent-%COMP%]{height:30%}.nec-modal-header[_ngcontent-%COMP%], .second-element[_ngcontent-%COMP%]{padding:12px;display:flex;min-height:45px;max-height:50px;justify-content:space-between;align-items:center}.nec-modal-body[_ngcontent-%COMP%]{overflow-y:auto}.nec-modal-footer[_ngcontent-%COMP%] > .second-element[_ngcontent-%COMP%]{border-top:1px solid var(--border-bottom)}.nec-modal-div[_ngcontent-%COMP%]{display:flex;align-items:center}.arrow-span[_ngcontent-%COMP%]{margin:0 12px;color:gray}.nec-close-btn[_ngcontent-%COMP%]{color:gray}.nec-post-btn[_ngcontent-%COMP%]{font-size:1rem;padding:8px 12px;border-radius:16px}.first-element[_ngcontent-%COMP%]{display:flex;padding-top:12px;padding-bottom:12px;column-gap:16px}.req-list-item-header[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center;align-content:center}.rlth-time[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%!important}.rlth-time-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin-right:6px;text-align:center;display:flex;justify-content:center;align-items:center}.rlth-time-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto}.rlth-time-icon-min[_ngcontent-%COMP%]{width:11px;height:11px}.rlth-time-icon-space[_ngcontent-%COMP%]{margin-left:8px}.rlth-time-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;max-width:100%;font-size:1rem;margin-left:6px}.rlth-time-div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.rlth-time-text[_ngcontent-%COMP%]{font-size:1rem;text-transform:capitalize}.rlth-time-user[_ngcontent-%COMP%]{font-size:.9rem;font-weight:350;color:var(--dim-text-color);text-align:center;display:flex;align-items:center;overflow:hidden;text-overflow:ellipsis;max-width:calc(90vw - 50px)}.rlth-time-user-min[_ngcontent-%COMP%]{font-size:.7rem}.rlth-time-user-black[_ngcontent-%COMP%]{color:#000!important}.req-list-item-footer[_ngcontent-%COMP%]{flex:1;padding-top:6px;display:flex;justify-content:space-between;align-items:center}.add-associate-img[_ngcontent-%COMP%]{width:12px;height:12px;margin:auto}.add-associate-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 16px;background-color:var(--accent-bg-color);color:var(--accent-text-color);border-radius:5px}.add-associate-text[_ngcontent-%COMP%]{margin-left:6px}.del-associate-img[_ngcontent-%COMP%]{width:12px;height:12px;margin:auto}.nec-model-request[_ngcontent-%COMP%]{width:100%;padding:12px 3px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;font-weight:350}.task-list-item[_ngcontent-%COMP%]   .rlth-minsize[_ngcontent-%COMP%]{background-color:var(--dim-bg-color)}.nec-model-entity[_ngcontent-%COMP%]{padding:16px}.nec-model-entity-container[_ngcontent-%COMP%]{padding:8px 16px 16px}.associate-div-segmented[_ngcontent-%COMP%]{padding:16px 16px 8px;display:flex;justify-content:space-between}"]}),i})();var Mt=r(5268);const qt=[{path:":entity/:id",component:bt}];let Et=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Mt.m,m.Bz.forChild(qt)]]}),i})()}}]);