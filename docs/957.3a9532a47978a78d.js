"use strict";(self.webpackChunkfeedback_loop_client=self.webpackChunkfeedback_loop_client||[]).push([[957],{9957:(he,f,a)=>{a.r(f),a.d(f,{TaskModule:()=>de});var _=a(9808),d=a(2626),e=a(5e3),h=a(6101),x=a(3616),l=a(9352),v=a(4817),k=a(7797);function M(n,s){1&n&&(e.TgZ(0,"span",7),e._uU(1," arrow_back "),e.qZA())}function w(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitTask()}),e._uU(1,"Submit"),e.qZA()}2&n&&e.Q6J("type","primary")("inline",!0)("size","small")}let Z=(()=>{class n{constructor(t,i,o,r){this.taskService=t,this.router=i,this.activeRoute=o,this.authQuery=r,this.activeRoute.queryParams.subscribe(g=>{g.id&&(this.selectedRequest=g.id)})}ngOnInit(){}submitTask(){this.jsonContent&&(this.taskService.addTask({content:this.jsonContent,rawContent:this.raw,requests:this.selectedRequest?[this.selectedRequest]:null,percentage:0,createdByUser:this.authQuery.user.id}),this.router.navigate(["/home/task/list"]))}getEditorContent(t){this.jsonContent=t.json,this.raw=t.raw}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.Y),e.Y36(d.F0),e.Y36(d.gz),e.Y36(x.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-task"]],decls:10,vars:4,consts:[[1,"new-req-body"],[3,"icon","mode","rightContent"],["nav_bar_arrow",""],["nav_bar_submit",""],[1,"new-task-container"],[3,"size"],[3,"content"],["appBackButton","",1,"material-symbols-rounded","button-icon"],["Button","",1,"button-icon",2,"margin-right","4px",3,"type","inline","size","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"Navbar",1),e._uU(2," New Task "),e.qZA(),e.YNc(3,M,2,0,"ng-template",null,2,e.W1O),e.YNc(5,w,2,3,"ng-template",null,3,e.W1O),e.TgZ(7,"div",4)(8,"WingBlank",5)(9,"markdown-editor",6),e.NdJ("content",function(r){return i.getEditorContent(r)}),e.qZA()()()()),2&t){const o=e.MAs(4),r=e.MAs(6);e.xp6(1),e.Q6J("icon",o)("mode","light")("rightContent",r),e.xp6(7),e.Q6J("size","md")}},directives:[l.w5,v.z,l.r0,l.gx,k.k1],styles:[".new-req-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:100%;overflow:hidden}Navbar[_ngcontent-%COMP%]{flex:1;min-height:50px;max-height:50px;z-index:10}markdown-editor[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 60px)}.new-task-container[_ngcontent-%COMP%]{padding-top:10px}"]}),n})();var y=a(5861),u=(()=>{return(n=u||(u={})).Critical="Critical",n.Major="Major",n.Minor="Minor",u;var n})(),m=(()=>{return(n=m||(m={})).YetToStart="Yet To Start",n.InDiscussion="In Discussion",n.InProgress="In Progress",n.Completed="Completed",n.Testing="Testing",n.Released="Released",m;var n})(),q=a(9565),A=a(6335),z=a(9033),J=a(4419),b=a(6819),N=a(6832),Q=a(3455),I=a(4342),V=a(4112),T=a(6718),C=a(2382),O=a(5405),U=a(5499),S=a(53);const Y=["content"];function P(n,s){1&n&&(e.TgZ(0,"span",11),e._uU(1," arrow_back "),e.qZA())}function F(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).toggleButtonValue()}),e._uU(1,"Edit"),e.qZA()}2&n&&e.Q6J("type","primary")("inline",!0)("size","small")}function R(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateTask()}),e._uU(1,"Submit"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("type","primary")("disabled",t.compareTask())("inline",!0)("size","small")}}function j(n,s){if(1&n&&(e.YNc(0,F,2,3,"div",12),e.YNc(1,R,2,4,"div",13)),2&n){const t=e.oxw();e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode)}}function E(n,s){if(1&n&&e._UZ(0,"div",32),2&n){const t=e.oxw(2);e.Q6J("MarkdownContentParser",t.task.content)}}function L(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"markdown-editor",33,34),e.NdJ("jsonContentChange",function(o){return e.CHM(t),e.oxw(2).task.content=o}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("jsonContent",t.task.content)}}function B(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",17)(2,"span",18)(3,"span",19),e._uU(4," dataset "),e.qZA(),e._uU(5," Properties "),e.qZA(),e.TgZ(6,"span",20),e._uU(7,"Status"),e.qZA(),e.TgZ(8,"span",21)(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"span",20),e._uU(12,"Priority"),e.qZA(),e.TgZ(13,"span",21)(14,"span"),e._uU(15),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(10),e.Oqu(t.task.status),e.xp6(5),e.Oqu(t.task.priority)}}function H(n,s){if(1&n&&e._UZ(0,"nz-option",39),2&n){const t=s.$implicit;e.Q6J("nzValue",t)("nzLabel",t)}}function D(n,s){if(1&n&&e._UZ(0,"nz-option",39),2&n){const t=s.$implicit;e.Q6J("nzValue",t)("nzLabel",t)}}function W(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"span",18)(2,"span",19),e._uU(3," dataset "),e.qZA(),e._uU(4," Properties "),e.qZA(),e.TgZ(5,"div",35)(6,"div",36)(7,"span",20),e._uU(8,"Status"),e.qZA(),e.TgZ(9,"div",21)(10,"nz-select",37),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).task.status=o}),e.YNc(11,H,1,2,"nz-option",38),e.qZA()()(),e.TgZ(12,"div",36)(13,"span",20),e._uU(14,"Priority"),e.qZA(),e.TgZ(15,"div",21)(16,"nz-select",37),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).task.priority=o}),e.YNc(17,D,1,2,"nz-option",38),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(10),e.Q6J("ngModel",t.task.status),e.xp6(1),e.Q6J("ngForOf",t.status),e.xp6(5),e.Q6J("ngModel",t.task.priority),e.xp6(1),e.Q6J("ngForOf",t.priority)}}function G(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openModal()}),e._uU(1,"Add"),e.qZA()}2&n&&e.Q6J("type","primary")("inline",!0)("size","small")}function $(n,s){if(1&n&&e._UZ(0,"app-req-list-item",40),2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("size",i.min)("req",t)}}function X(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Data"),e.qZA())}function K(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showMilestoneModel=!0}),e._uU(1,"Add"),e.qZA()}2&n&&e.Q6J("type","primary")("inline",!0)("size","small")}function ee(n,s){if(1&n&&e._UZ(0,"app-milestone-card",41),2&n){const t=e.oxw(2);e.Q6J("size",t.min)("flMilestone",t.getAssociatedMilestone())}}function te(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Data"),e.qZA())}function ne(n,s){if(1&n&&(e.TgZ(0,"div",16)(1,"div",17)(2,"span",18)(3,"span",19),e._uU(4," info "),e.qZA(),e._uU(5," General Information "),e.qZA(),e.TgZ(6,"span",20),e._uU(7,"Posted By"),e.qZA(),e.TgZ(8,"span",21)(9,"span"),e._uU(10),e.ALo(11,"async"),e.qZA()(),e.TgZ(12,"span",20),e._uU(13,"Created At"),e.qZA(),e.TgZ(14,"span",21)(15,"span"),e._uU(16),e.ALo(17,"date"),e.qZA()(),e.TgZ(18,"span",20),e._uU(19,"Progress"),e.qZA(),e.TgZ(20,"div",22),e._UZ(21,"nz-progress",23),e.qZA()(),e.TgZ(22,"div",17)(23,"div",24)(24,"span",18)(25,"span",19),e._uU(26," description "),e.qZA(),e._uU(27," Description "),e.qZA()(),e.YNc(28,E,1,1,"div",25),e.YNc(29,L,2,1,"markdown-editor",26),e.qZA(),e.YNc(30,B,16,2,"div",27),e.YNc(31,W,18,4,"div",28),e.TgZ(32,"div",17)(33,"div",24)(34,"span",18)(35,"span",19),e._uU(36," back_hand "),e.qZA(),e._uU(37," Associated Requests "),e.qZA(),e.YNc(38,G,2,3,"div",12),e.qZA(),e.TgZ(39,"div",29),e.YNc(40,$,1,2,"app-req-list-item",30),e.ALo(41,"async"),e.YNc(42,X,2,0,"span",27),e.qZA()(),e.TgZ(43,"div",17)(44,"div",24)(45,"span",18)(46,"span",19),e._uU(47," emoji_flags "),e.qZA(),e._uU(48," Associated Milestone "),e.qZA(),e.YNc(49,K,2,3,"div",12),e.qZA(),e.TgZ(50,"div",29),e.YNc(51,ee,1,2,"app-milestone-card",31),e.YNc(52,te,2,0,"span",27),e.qZA()()()),2&n){const t=e.oxw();let i;e.xp6(10),e.Oqu(null==(i=e.lcZ(11,15,t.userQuery.selectEntity(t.task.createdByUser)))?null:i.email),e.xp6(6),e.Oqu(e.lcZ(17,17,null==t.task?null:t.task.createdAt)),e.xp6(5),e.Q6J("nzStrokeColor","var(--accent-text-color)")("nzPercent",t.task.percentage)("nzShowInfo",!0),e.xp6(7),e.Q6J("ngIf",!t.editMode&&t.task.content),e.xp6(1),e.Q6J("ngIf",t.editMode),e.xp6(1),e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode),e.xp6(7),e.Q6J("ngIf",t.editMode),e.xp6(2),e.Q6J("ngForOf",e.lcZ(41,19,t.getAssociatedRequests())),e.xp6(2),e.Q6J("ngIf",0===(null==t.task.requests?null:t.task.requests.length)),e.xp6(7),e.Q6J("ngIf",t.editMode),e.xp6(2),e.Q6J("ngIf",null!=t.getAssociatedMilestone()),e.xp6(1),e.Q6J("ngIf",null==t.getAssociatedMilestone())}}function ie(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-associate",42),e.NdJ("closed",function(){return e.CHM(t),e.oxw().closeModal()})("selectedList",function(o){return e.CHM(t),e.oxw().getSelectedRequest(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("sourceId",t.getSourceId())("multiSelect",!0)("preselect",t.getAssociatedTaskArray())}}const se=function(n){return[n]},oe=function(){return[]};function ae(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-associate",43),e.NdJ("closed",function(){return e.CHM(t),e.oxw().showMilestoneModel=!1})("selectedList",function(o){return e.CHM(t),e.oxw().getSelectedMilestone(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("sourceId",t.getSourceId())("multiSelect",!1)("preselect",t.task.associatedMilestone?e.VKq(3,se,t.task.associatedMilestone):e.DdM(5,oe))}}const re=[{path:"new",component:Z},{path:"view/:id",component:(()=>{class n{constructor(t,i,o,r,g,pe,_e,ue,me,ge){this.activeRoute=t,this.router=i,this.navigation=o,this.taskService=r,this.requestService=g,this.milestoneService=pe,this.taskQuery=_e,this.userQuery=ue,this.requestQuery=me,this.milestoneQuery=ge,this.task={},this.oldTask={},this.showLoader=!0,this.showMilestoneModel=!1,this.status=Object.values(m),this.priority=Object.values(u),this.buttonValue="Edit",this.editMode=!1,this.min="min",this.horizontal=l.eT.HORIZONTAL,this.stepStatus=l.du,this.steps=["Yet To Start","In Discussion","In Progress","Completed","Testing","Released"],this.taskUpdate=!1,this.activeRoute.params.subscribe(p=>{p.id&&(this.taskId=p.id,this.taskSelectEntity=this.taskQuery.selectEntity(p.id).subscribe(c=>{console.log("taskSelectEntity",c),null!=c&&(this.task=Object.assign({},c),this.oldTask=Object.assign({},c),this.oldTask.requests=[...(null==c?void 0:c.requests)?c.requests:[]],this.showLoader=!1,this.task.requests&&this.task.requests.forEach(fe=>{this.requestService.getOne(fe)}),this.task.associatedMilestone&&this.milestoneService.getOne(this.task.associatedMilestone))}))}),this.activeRoute.queryParams.subscribe(p=>{this.taskService.getOne(this.taskId),this.editMode=!!p.edit&&p.edit})}ngOnInit(){}ngAfterViewInit(){console.log("Came to AfterViewInit")}ngDoCheck(){}closeModal(){this.showModal=!1}openModal(){this.showModal=!0}getSelectedRequest(t){this.task.requests=[...t]}getSelectedMilestone(t){this.task.associatedMilestone=t}updateTask(){var t=this;return(0,y.Z)(function*(){var i;t.taskUpdate||(null!=t.task&&null!=t.task.id&&(0==(null===(i=t.task.requests)||void 0===i?void 0:i.length)&&(t.task.requests=null),t.taskService.updateTask(t.task.id,t.task)),t.navigation.back())})()}toggleButtonValue(){this.router.navigate([this.router.url],{queryParams:{edit:!0}})}compareTask(){return!!this.task&&(this.taskUpdate=JSON.stringify(this.task)===JSON.stringify(this.oldTask),this.taskUpdate)}getAssociatedRequests(){return this.requestQuery.selectMany(this.task.requests?this.task.requests:[])}getAssociatedTaskArray(){var t,i;return(null===(t=this.task)||void 0===t?void 0:t.requests)?[...null===(i=this.task)||void 0===i?void 0:i.requests]:[]}getSourceId(){return this.task.id}getAssociatedMilestone(){return this.milestoneQuery.getEntity(this.task.associatedMilestone)}ngOnDestroy(){this.taskSelectEntity.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(q.f),e.Y36(h.Y),e.Y36(A.P),e.Y36(z.l),e.Y36(J.R),e.Y36(b.o),e.Y36(N.Z),e.Y36(Q.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-task"]],viewQuery:function(t,i){if(1&t&&e.Gf(Y,5),2&t){let o;e.iGM(o=e.CRH())&&(i.content=o.first)}},decls:15,vars:16,consts:[[1,"new-req-body"],[3,"icon","mode","rightContent"],["nav_bar_arrow",""],["nav_bar_submit",""],[1,"new-req-container","req-container-color"],[3,"size"],["class","content_viewer",4,"ngIf"],[3,"toast","text","animating"],[1,"modal",3,"ngModel","transparent","maskClosable","ngModelChange","onClose"],["type","request",3,"sourceId","multiSelect","preselect","closed","selectedList",4,"ngIf"],["type","milestone",3,"sourceId","multiSelect","preselect","closed","selectedList",4,"ngIf"],["appBackButton","",1,"material-symbols-rounded","button-icon"],["Button","","size","small","class","button-icon timeline-button",3,"type","inline","size","click",4,"ngIf"],["Button","","class","button-icon","style","margin-right: 4px",3,"type","disabled","inline","size","click",4,"ngIf"],["Button","","size","small",1,"button-icon","timeline-button",3,"type","inline","size","click"],["Button","",1,"button-icon",2,"margin-right","4px",3,"type","disabled","inline","size","click"],[1,"content_viewer"],[1,"timeline-div-container"],[1,"timeline-heading"],[1,"material-symbols-rounded"],[1,"timeline-title-span"],[1,"timeline-sub-container"],[1,"timeline-sub-container","timeline-sub-container-flex"],[3,"nzStrokeColor","nzPercent","nzShowInfo"],[1,"timeline-options-container"],["class","timeline-sub-container timeline-sub-container-editor desc-font",3,"MarkdownContentParser",4,"ngIf"],["class","",3,"jsonContent","jsonContentChange",4,"ngIf"],[4,"ngIf"],["class","timeline-div-container",4,"ngIf"],[1,"timeline-sub-container","associated-list"],[3,"size","req",4,"ngFor","ngForOf"],[3,"size","flMilestone",4,"ngIf"],[1,"timeline-sub-container","timeline-sub-container-editor","desc-font",3,"MarkdownContentParser"],[1,"",3,"jsonContent","jsonContentChange"],["markdownEditor",""],[1,"timeline-prop-container"],[1,"timeline-props-item"],["nzSize","small",1,"timeline-options-select",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"size","req"],[3,"size","flMilestone"],["type","request",3,"sourceId","multiSelect","preselect","closed","selectedList"],["type","milestone",3,"sourceId","multiSelect","preselect","closed","selectedList"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"Navbar",1),e._uU(2," Task "),e.qZA(),e.YNc(3,P,2,0,"ng-template",null,2,e.W1O),e.YNc(5,j,2,2,"ng-template",null,3,e.W1O),e.TgZ(7,"div",4),e._UZ(8,"WhiteSpace",5),e.YNc(9,ne,53,21,"div",6),e.qZA(),e._UZ(10,"ActivityIndicator",7),e.qZA(),e.TgZ(11,"Modal",8),e.NdJ("ngModelChange",function(r){return i.showModal=r})("onClose",function(){return i.closeModal()}),e.YNc(12,ie,1,3,"app-add-associate",9),e.qZA(),e.TgZ(13,"Modal",8),e.NdJ("ngModelChange",function(r){return i.showMilestoneModel=r})("onClose",function(){return i.closeModal()}),e.YNc(14,ae,1,6,"app-add-associate",10),e.qZA()),2&t){const o=e.MAs(4),r=e.MAs(6);e.xp6(1),e.Q6J("icon",o)("mode","light")("rightContent",r),e.xp6(7),e.Q6J("size","md"),e.xp6(1),e.Q6J("ngIf",!i.showLoader),e.xp6(1),e.Q6J("toast",!0)("text","Loading Task")("animating",i.showLoader),e.xp6(1),e.Q6J("ngModel",i.showModal)("transparent",!0)("maskClosable",!0),e.xp6(1),e.Q6J("ngIf",i.showModal),e.xp6(1),e.Q6J("ngModel",i.showMilestoneModel)("transparent",!0)("maskClosable",!0),e.xp6(1),e.Q6J("ngIf",i.showMilestoneModel)}},directives:[l.w5,v.z,_.O5,l.r0,l.yG,I.M,V.J,k.k1,T.Vq,C.JJ,C.On,_.sg,T.Ip,O.U,U.T,l.dA,l.zS,S.W],pipes:[_.Ov,_.uU],styles:[".new-req-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;overflow:hidden}Navbar[_ngcontent-%COMP%]{flex:1;min-height:50px;max-height:50px;z-index:10}.new-req-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;overflow:scroll;width:100%;height:calc(100% - 50px);padding:6px;font-size:1rem}.req-container-color[_ngcontent-%COMP%]{background-color:var(--dim-bg-color)!important}.timeline-container[_ngcontent-%COMP%], .timeline-box[_ngcontent-%COMP%]{background-color:#fff;border-radius:.5rem}.timeline-box[_ngcontent-%COMP%]{padding:1rem}.timeline-container[_ngcontent-%COMP%]{display:grid;grid-auto-rows:auto}.timeline-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;padding:1rem 0rem;grid-template-columns:2fr 3fr;grid-gap:1.5rem;gap:1.5rem;border-bottom:1px solid var(--dim-bg-color)}.timeline-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{justify-self:flex-end;font-weight:600}.heading[_ngcontent-%COMP%]{color:var(--dim-text-color)}steps[_ngcontent-%COMP%]:last-child:first-child:last-child{margin-right:-20px}.associated-list[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;display:flex}"]}),n})()}];let le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(re)],d.Bz]}),n})();var ce=a(3926);let de=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.ez,le,ce.m]]}),n})()}}]);