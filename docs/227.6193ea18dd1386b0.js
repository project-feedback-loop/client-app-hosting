"use strict";(self.webpackChunkfeedback_loop_client=self.webpackChunkfeedback_loop_client||[]).push([[227],{3227:(x,g,s)=>{s.r(g),s.d(g,{AuthModule:()=>L});var p=s(9808),h=s(9826);function f(t,i,e,o,c,r,a){try{var l=t[r](a),u=l.value}catch(T){return void e(T)}l.done?i(u):Promise.resolve(u).then(o,c)}var d=s(2340),n=s(5e3),y=s(622);let v=(()=>{class t{constructor(e,o,c){this.activatedRoute=e,this.authService=o,this.router=c,this.strapi_auth_provider=d.N.strapi_auth_provider,this.redirectText="",this.activatedRoute.queryParams.subscribe(r=>{console.log(r),this.getJWT(r),r.access_token?(console.log("CALLBACK"),this.redirectText="App",this.getJWT(r)):r.login&&(console.log("LOGIN"),this.redirectText=this.strapi_auth_provider,this.googleLoginCall())})}ngOnInit(){}googleLoginCall(){window.location.href=`${d.N.strapi_server}/api/connect/${d.N.strapi_auth_provider}`}getJWT(e){var o=this;return function m(t){return function(){var i=this,e=arguments;return new Promise(function(o,c){var r=t.apply(i,e);function a(u){f(r,o,c,a,l,"next",u)}function l(u){f(r,o,c,a,l,"throw",u)}a(void 0)})}}(function*(){yield o.authService.get(e.access_token,e).subscribe(c=>{o.authService.add(c),o.router.navigate(["/"])})})()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(h.gz),n.Y36(y.e),n.Y36(h.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:4,vars:3,consts:[[1,"login-page-container"],[1,"login-button"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0)(1,"span",1),n._uU(2),n.ALo(3,"titlecase"),n.qZA()()),2&e&&(n.xp6(2),n.hij(" Redirecting to ",n.lcZ(3,1,o.redirectText)," "))},pipes:[p.rS],styles:[".login-page-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:var(--dim-bg-color)}.login-button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:0 6px;margin:auto}"]}),t})();const A=[{path:"",component:v},{path:"callback",component:v}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[h.Bz.forChild(A)],h.Bz]}),t})(),L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[p.ez,C]]}),t})()}}]);