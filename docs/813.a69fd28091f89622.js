"use strict";(self.webpackChunkfeedback_loop_client=self.webpackChunkfeedback_loop_client||[]).push([[813],{5813:(qe,f,r)=>{r.r(f),r.d(f,{ViewEntityModule:()=>xe});var _=r(914),e=r(5e3),m=r(2626),Z=r(3616),S=r(6819),y=r(6832),x=r(4419),k=r(3455),O=r(8793),V=r(7465),C=r(6335),w=r(6101),T=r(9033),J=r(5319),Q=r(9565),c=r(9352),I=r(4817),d=r(9808),U=r(7797),P=r(4933),b=r(4770),M=r(6762),v=r(5405),q=r(5499),A=r(2382);function N(n,a){if(1&n&&e._UZ(0,"app-req-list-item",18),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("request",i.getRequestList(t))}}function Y(n,a){if(1&n&&e._UZ(0,"app-task-list-item",19),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("flTask",i.getTaskList(t))}}function j(n,a){if(1&n&&e._UZ(0,"app-milestone-card",20),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("flMilestone",i.getMilestoneList(t))}}function L(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"div",12)(3,"input",13),e.NdJ("click",function(s){const l=e.CHM(t).$implicit;return e.oxw().selecting(l.id,s)}),e.qZA()(),e.TgZ(4,"div",14),e.YNc(5,N,1,1,"app-req-list-item",15),e.YNc(6,Y,1,1,"app-task-list-item",16),e.YNc(7,j,1,1,"app-milestone-card",17),e.qZA()()()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(3),e.Q6J("checked",i.selected.includes(t.id?t.id:-1)),e.xp6(2),e.Q6J("ngIf","request"==i.type),e.xp6(1),e.Q6J("ngIf","task"==i.type),e.xp6(1),e.Q6J("ngIf","milestone"==i.type)}}let z=(()=>{class n{constructor(t,i,s,o,l,p,u){this.route=t,this.requestQuery=i,this.taskQuery=s,this.milestoneQuery=o,this.requestService=l,this.taskService=p,this.milestoneService=u,this.selected=[],this.closed=new e.vpe,this.selectedList=new e.vpe}ngOnInit(){}ngAfterContentInit(){"request"===this.type?(this.requestService.getall(),this.list=this.requestQuery.$requests):"task"===this.type?(this.taskService.getall(),this.list=this.taskQuery.$tasks):"milestone"===this.type&&(this.milestoneService.getall(),this.list=this.milestoneQuery.$milestones),this.preSelected&&(this.selected=[...this.preSelected])}selecting(t,i){if(t)if(i.target.checked)this.multiSelect?this.selected.push(t):this.selected=[t];else{let s=this.selected.indexOf(t);this.selected.splice(s,1)}}pickSelectedRequest(){if(this.selected.length>0)this.selectedList.emit(this.multiSelect?this.selected:this.selected[0]);else{let t;this.multiSelect&&(t=this.selected),this.selectedList.emit(t)}this.close()}close(){this.closed.emit(!1)}getRequestList(t){return t}getTaskList(t){return t}getMilestoneList(t){return t}creatingNew(){this.sourceId&&this.route.navigate([`/${this.type}/new`],{queryParams:{id:this.sourceId}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0),e.Y36(y.Z),e.Y36(x.R),e.Y36(k.l),e.Y36(C.P),e.Y36(w.Y),e.Y36(T.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-associate"]],inputs:{preSelected:["preselect","preSelected"],multiSelect:"multiSelect",sourceId:"sourceId",type:"type"},outputs:{closed:"closed",selectedList:"selectedList"},decls:18,vars:9,consts:[[1,"body"],[1,"header"],[1,"search-container"],[1,"icon-div",3,"click"],[1,"material-symbols-rounded"],[1,"am-demo-bd"],[2,"border-bottom","1px solid #ddd"],[3,"placeholder","maxLength"],["Button","",1,"button",3,"type","size","inline","click"],[1,"main"],[4,"ngFor","ngForOf"],[1,"option-card"],[1,"checkbox-container"],["type","checkbox",3,"checked","click"],[1,"element-container"],[3,"request",4,"ngIf"],[3,"flTask",4,"ngIf"],[3,"flMilestone",4,"ngIf"],[3,"request"],[3,"flTask"],[3,"flMilestone"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("click",function(){return i.close()}),e.TgZ(4,"span",4),e._uU(5," close "),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6),e._UZ(8,"SearchBar",7),e.qZA()(),e.TgZ(9,"div",3),e.NdJ("click",function(){return i.pickSelectedRequest()}),e.TgZ(10,"span",4),e._uU(11," done "),e.qZA()()(),e.TgZ(12,"div",8),e.NdJ("click",function(){return i.creatingNew()}),e._uU(13),e.qZA()(),e.TgZ(14,"div",9)(15,"List"),e.YNc(16,L,8,4,"div",10),e.ALo(17,"async"),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("placeholder","Search")("maxLength",20),e.xp6(4),e.Q6J("type","primary")("size","small")("inline",!0),e.xp6(1),e.hij("new ",i.type,""),e.xp6(3),e.Q6J("ngForOf",e.lcZ(17,7,i.list)))},directives:[c.NB,c.r0,c.ns,d.sg,d.O5,v.U,M.T,q.T],pipes:[d.Ov],styles:[".body[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;grid-template-columns:1fr;height:100%;position:relative}.search-container[_ngcontent-%COMP%]{height:50px;width:100%;display:grid;grid-template-columns:50px auto 50px;align-items:center;background-color:#fff}.header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.main[_ngcontent-%COMP%]{overflow-y:auto;height:100%}.icon-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.option-card[_ngcontent-%COMP%]{display:flex;text-align:start;padding:0 10px}.checkbox-container[_ngcontent-%COMP%]{padding:13px 12px 0 5px}.checkbox-container[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:20px;height:20px}.element-container[_ngcontent-%COMP%]{flex:1}.button[_ngcontent-%COMP%]{margin-left:17px;cursor:pointer}"]}),n})();var F=r(5513);function H(n,a){1&n&&(e.TgZ(0,"span",38),e._uU(1," arrow_back "),e.qZA())}const E=function(n){return{opacity:n}};function $(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateEntity()}),e._uU(1,"Update"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("type","primary")("disabled",t.canUpdateEntity())("ngStyle",e.VKq(5,E,t.canUpdateEntity()?1:.5))("inline",!0)("size","small")}}function R(n,a){if(1&n&&(e.TgZ(0,"header",40)(1,"div",41)(2,"span",42),e._UZ(3,"img",43),e.qZA(),e.TgZ(4,"div",44)(5,"span",45),e._uU(6),e.qZA(),e._UZ(7,"WhiteSpace",46),e.TgZ(8,"span",14),e._uU(9),e.ALo(10,"date"),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("src",t.createdUser.picture,e.LSH),e.xp6(3),e.hij(" ",t.createdUser.name," "),e.xp6(1),e.Q6J("size","xs"),e.xp6(2),e.hij(" ",e.xi3(10,4,t.entityObj.createdAt,"h:mm a . MMM d, y")," ")}}function B(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"markdown-editor",47),e.NdJ("selectedMention",function(s){return e.CHM(t),e.oxw().getMention(s)})("jsonContentChange",function(s){return e.CHM(t),e.oxw().request.content=s})("content",function(s){return e.CHM(t),e.oxw().request.rawContent=s.raw})("selectedTag",function(s){return e.CHM(t),e.oxw().getTag(s)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("tagArray",t.global.requestTagArray)("mentionArray",t.global.mentionArray)("enableMenu",!1)("jsonContent",t.request.content)}}function D(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"markdown-editor",47),e.NdJ("selectedMention",function(s){return e.CHM(t),e.oxw().getMention(s)})("jsonContentChange",function(s){return e.CHM(t),e.oxw().task.content=s})("content",function(s){return e.CHM(t),e.oxw().task.rawContent=s.raw})("selectedTag",function(s){return e.CHM(t),e.oxw().getTag(s)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("tagArray",t.global.taskTagArray)("mentionArray",t.global.mentionArray)("enableMenu",!1)("jsonContent",t.task.content)}}function W(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"markdown-editor",47),e.NdJ("selectedMention",function(s){return e.CHM(t),e.oxw().getMention(s)})("jsonContentChange",function(s){return e.CHM(t),e.oxw().milestone.content=s})("content",function(s){return e.CHM(t),e.oxw().milestone.rawContent=s.raw})("selectedTag",function(s){return e.CHM(t),e.oxw().getTag(s)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("tagArray",t.global.tagArray)("mentionArray",t.global.mentionArray)("enableMenu",!1)("jsonContent",t.milestone.content)}}function K(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"app-field-select",49),e.NdJ("defaultValueChange",function(s){return e.CHM(t),e.oxw().request.category=s}),e.qZA(),e.TgZ(2,"app-field-select",50),e.NdJ("defaultValueChange",function(s){return e.CHM(t),e.oxw().request.severity=s}),e.qZA(),e.TgZ(3,"app-field-select",51),e.NdJ("defaultValueChange",function(s){return e.CHM(t),e.oxw().request.module=s}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("options",t.fields.categories)("defaultValue",t.request.category),e.xp6(1),e.Q6J("options",t.fields.severities)("defaultValue",t.request.severity),e.xp6(1),e.Q6J("options",t.fields.modules)("defaultValue",t.request.module)}}function X(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"app-field-select",52),e.NdJ("defaultValueChange",function(s){return e.CHM(t),e.oxw().task.priority=s}),e.qZA(),e.TgZ(2,"app-field-select",53),e.NdJ("defaultValueChange",function(s){return e.CHM(t),e.oxw().task.status=s}),e.qZA(),e.TgZ(3,"app-field-select",51),e.NdJ("defaultValueChange",function(s){return e.CHM(t),e.oxw().request.module=s}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("options",t.fields.taskPriorites)("defaultValue",t.task.priority),e.xp6(1),e.Q6J("options",t.fields.taskStatus)("defaultValue",t.task.status),e.xp6(1),e.Q6J("options",t.fields.modules)("defaultValue",t.request.module)}}function G(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"app-field-select",53),e.NdJ("defaultValueChange",function(s){return e.CHM(t),e.oxw().milestone.status=s}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("options",t.fields.taskStatus)("defaultValue",t.milestone.status)}}function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"SwipeAction",56),e.NdJ("onOpen",function(){return e.CHM(t),e.oxw(2).swipeOpen()})("onClose",function(){return e.CHM(t),e.oxw(2).swipeClose()}),e._UZ(1,"app-task-list-item",57),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("autoClose",!0)("right",i.rightSwipeAction),e.xp6(1),e.Q6J("disabled",!1)("size","min")("flTask",t)}}function te(n,a){if(1&n&&(e.TgZ(0,"div",54),e.YNc(1,ee,2,5,"SwipeAction",55),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.taskQuery.selectMany(t.request.associatedTasks)))}}function ie(n,a){if(1&n&&e._UZ(0,"app-req-list-item",59),2&n){const t=a.$implicit;e.Q6J("disabled",!1)("size","min")("request",t)}}function ne(n,a){if(1&n&&(e.TgZ(0,"div",54),e.YNc(1,ie,1,3,"app-req-list-item",58),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.requestQuery.selectMany(t.task.requests)))}}function se(n,a){if(1&n&&e._UZ(0,"app-milestone-card",61),2&n){const t=a.$implicit;e.Q6J("size","min")("flMilestone",t)}}const oe=function(n){return[n]};function ae(n,a){if(1&n&&(e.TgZ(0,"div",54),e.YNc(1,se,1,2,"app-milestone-card",60),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.milestoneQuery.selectMany(e.VKq(3,oe,t.task.associatedMilestone))))}}function re(n,a){if(1&n&&e._UZ(0,"app-task-list-item",57),2&n){const t=a.$implicit;e.Q6J("disabled",!1)("size","min")("flTask",t)}}function le(n,a){if(1&n&&(e.TgZ(0,"div",54),e.YNc(1,re,1,3,"app-task-list-item",62),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.taskQuery.selectMany(t.milestone.tasks)))}}function ce(n,a){1&n&&(e.TgZ(0,"span",63),e._uU(1," home "),e.qZA())}function de(n,a){1&n&&(e.TgZ(0,"span",63),e._uU(1," task "),e.qZA())}function pe(n,a){1&n&&(e.TgZ(0,"span",63),e._uU(1," emoji_flags "),e.qZA())}function ue(n,a){1&n&&(e.TgZ(0,"span",63),e._uU(1," person "),e.qZA())}function _e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-associate",64),e.NdJ("selectedList",function(s){return e.CHM(t),e.oxw().getSelectedRequest(s)})("closed",function(){return e.CHM(t),e.oxw().showRequestModel=!1}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("sourceId",t.getSourceId())("multiSelect",!0)("preselect",t.getEntityAssociaties("request"))("type","request")}}function me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-associate",64),e.NdJ("selectedList",function(s){return e.CHM(t),e.oxw().getSelectedTask(s)})("closed",function(){return e.CHM(t),e.oxw().showTaskModel=!1}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("sourceId",t.getSourceId())("multiSelect",!0)("preselect",t.getEntityAssociaties("task"))("type","task")}}function he(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-associate",64),e.NdJ("selectedList",function(s){return e.CHM(t),e.oxw().getSelectedMilestone(s)})("closed",function(){return e.CHM(t),e.oxw().showMilestoneModel=!1}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("sourceId",t.getSourceId())("multiSelect",!1)("preselect",t.getEntityAssociaties("milestone"))("type","milestone")}}let ge=(()=>{class n{constructor(t,i,s,o,l,p,u,h,g,ke,Ce,we,Te,be,Me,ve){this.activatedRoute=t,this.authQuery=i,this.userQuery=s,this.requestQuery=o,this.taskQuery=l,this.milestoneQuery=p,this.fields=u,this.global=h,this.requestService=g,this.taskService=ke,this.milestoneService=Ce,this.userService=we,this.navigationService=Te,this.notifier=be,this.modal=Me,this.router=ve,this.entity="",this.rightSwipeAction=[{text:"Delete",onPress:()=>console.log("delete"),className:"del-associate-btn"}],this.request={},this.task={},this.milestone={},this.oldRequest={},this.oldTask={},this.oldMilestone={},this.entityObj={},this.showRequestModel=!1,this.showTaskModel=!1,this.showMilestoneModel=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{t.entity&&t.id&&(this.entity=t.entity,this.getEntity(t.id))}),this.authSubscription=this.authQuery.$authUser.subscribe(t=>this.authUser=t)}getCreatedUser(t){this.userQuery.hasEntity(t)||this.userService.get(t).subscribe(),this.userSubscription=this.userQuery.selectEntity(t).subscribe(i=>{console.log(i),this.createdUser=i})}hasEntityInQuery(t,i){switch(t){case"request":this.requestQuery.hasEntity(i)||this.requestService.getOne(i);break;case"task":this.taskQuery.hasEntity(i)||this.taskService.getOne(i);break;case"milestone":this.milestoneQuery.hasEntity(i)||this.milestoneService.getOne(i);break;default:console.log("Unknown entity in hasEntityInQuery",t)}}getEntity(t){this.hasEntityInQuery(this.entity,t),"request"===this.entity?this.requestSubscription=this.requestQuery.selectEntity(t).subscribe(i=>{i?(console.log(i),this.request=Object.assign({},i),this.entityObj=Object.assign({},i),this.oldRequest=Object.assign({},i),this.request.createdByUser?this.getCreatedUser(this.request.createdByUser):this.requestService.getOne(t),this.request.associatedTasks&&this.request.associatedTasks.forEach(s=>{this.hasEntityInQuery("task",s)})):console.log(`No entity present for given id ${t}, entity ${this.entity}`)}):"task"===this.entity?this.taskSubscription=this.taskQuery.selectEntity(t).subscribe(i=>{i?(this.task=Object.assign({},i),this.oldTask=Object.assign({},i),this.entityObj=Object.assign({},i),this.task.createdByUser?this.getCreatedUser(this.task.createdByUser):this.taskService.getOne(t),this.task.requests&&this.task.requests.forEach(s=>{this.hasEntityInQuery("request",s)}),this.task.associatedMilestone&&this.hasEntityInQuery("milestone",this.task.associatedMilestone)):console.log(`No entity present for given id ${t}, entity ${this.entity}`)}):"milestone"===this.entity?this.milestoneSubscription=this.milestoneQuery.selectEntity(t).subscribe(i=>{i?(this.milestone=Object.assign({},i),this.oldMilestone=Object.assign({},i),this.entityObj=Object.assign({},i),this.milestone.createdByUser?this.getCreatedUser(this.milestone.createdByUser):this.milestoneService.getOne(t),this.milestone.tasks&&this.milestone.tasks.forEach(s=>{this.hasEntityInQuery("task",s)})):console.log(`No entity present for given id ${t}, entity ${this.entity}`)}):console.log("Unknown entity")}getTag(t){if("request"===this.entity)switch(t.type){case"Category":this.request.category=t.tag;break;case"Severity":this.request.severity=t.tag;break;case"Module":this.request.module=t.tag;break;default:console.log(`Unknown tag type in ${this.entity}: `,t.type)}else if("task"===this.entity)switch(t.type){case"Priority":this.task.priority=t.tag;break;case"Status":this.task.status=t.tag;break;default:console.log(`Unknown tag type in ${this.entity}: `,t.type)}else console.log("Unknown entity in getTag",this.entity,t)}getMention(t){console.log(t)}canUserEdit(){return!(!this.authUser||!this.createdUser)&&this.authUser.id===this.createdUser.id}isEntityUpdated(){return"request"===this.entity?JSON.stringify(this.request)!==JSON.stringify(this.oldRequest):"task"===this.entity?JSON.stringify(this.task)!==JSON.stringify(this.oldTask):"milestone"===this.entity&&JSON.stringify(this.milestone)!==JSON.stringify(this.oldMilestone)}canUpdateEntity(){return this.canUserEdit()&&this.isEntityUpdated()}updateEntity(){if(console.log("Coming to updateEntity"),this.canUpdateEntity()){switch(console.log("Coming to updateEntity passing return"),this.entity){case"request":null!=this.request&&null!=this.request.id&&(this.oldRequest=Object.assign({},this.request),null==this.request.associatedTasks&&(this.request.associatedTasks=[]),this.request.createdByUser=this.authQuery.user.id,this.requestService.updateRequest(this.request.id,this.request));break;case"task":console.log("Coming to updateEntity to task"),null!=this.task&&null!=this.task.id&&(this.oldTask=Object.assign({},this.task),null==this.task.requests&&(this.task.requests=null),null==this.task.associatedMilestone&&(this.task.associatedMilestone=null),console.log("Coming to updateEntity to task",this.task),this.taskService.updateTask(this.task.id,this.task));break;case"milestone":null!=this.milestone&&null!=this.milestone.id&&(this.oldMilestone=Object.assign({},this.milestone),this.milestoneService.updateMilestone(this.milestone.id,this.milestone))}this.notifierSubscription&&this.notifierSubscription.unsubscribe(),this.notifierSubscription=this.notifier.action$.pipe((0,_.vE)(`${this.entity.toLocaleLowerCase()}s`),(0,_.IY)("PUT")).subscribe(t=>{console.log(t),"request"===this.entity&&this.request&&this.request.id&&this.requestService.getOne(this.request.id),"task"===this.entity&&this.task&&this.task.id&&this.taskService.getOne(this.task.id),"milestone"===this.entity&&this.milestone&&this.milestone.id&&this.milestoneService.getOne(this.milestone.id)})}}swipeOpen(){console.log("SwipeOpen")}swipeClose(){console.log("SwipeClose")}getSelectedRequest(t){console.log(this.entity,"Selected Request",t),"task"===this.entity&&(this.task.requests=t)}getSelectedTask(t){switch(console.log(this.entity,"Selected Task",t),this.entity){case"request":this.request.associatedTasks=t;break;case"milestone":this.milestone.tasks=t}}getSelectedMilestone(t){console.log(this.entity,"Selected Milestone",t),"task"===this.entity&&(this.task.associatedMilestone=t)}getEntityAssociaties(t){if("request"===this.entity&&this.request){if("task"===t&&this.request.associatedTasks)return[...this.request.associatedTasks]}else if("task"===this.entity&&this.task){if("request"===t&&this.task.requests)return this.task.requests;if("milestone"===t&&this.task.associatedMilestone)return[this.task.associatedMilestone]}else if("milestone"===this.entity&&this.milestone&&"task"===t&&this.milestone.tasks)return this.milestone.tasks;return[]}getSourceId(){return this.entityObj.id}showEntityModal(t){switch(this.entity){case"request":case"milestone":this.showTaskModel=!0;break;case"task":0===t?this.showRequestModel=!0:1===t&&(this.showMilestoneModel=!0)}}getSegmentValues(){switch(this.entity){case"request":let t="Tasks (0)";return this.request.associatedTasks&&(t=`Tasks (${this.request.associatedTasks.length})`),[[t]];case"task":let i="Requests (0)",s="Milestone (0)";return this.task.requests&&(i=`Requests (${this.task.requests.length})`),this.task.associatedMilestone&&(s="Milestone (1)"),[[i],[s]];case"milestone":let o="Tasks (0)";return this.milestone.tasks&&(o=`Tasks (${this.milestone.tasks.length})`),[[o]]}return[]}showDeleteAlert(){this.modal.alert("Delete","Are you sure ?",[{text:"Cancel",onPress:()=>console.log("cancel"),style:{color:"var(--accent-text-color)",background:"var(--accent-bg-color)"}},{text:"OK",onPress:()=>this.deleteEntity(),style:{color:"var(--accent-text-color)",background:"var(--accent-bg-color)"}}],"android")}deleteEntity(){if(this.canUserEdit()){switch(this.entity){case"request":this.request.id&&this.requestService.deleteRequest(this.request.id);break;case"task":this.task.id&&this.taskService.deleteTask(this.task.id);break;case"milestone":this.milestone.id&&this.milestoneService.deleteMilestone(this.milestone.id)}this.notifierSubscription&&this.notifierSubscription.unsubscribe(),this.notifierSubscription=this.notifier.action$.pipe((0,_.vE)(`${this.entity.toLocaleLowerCase()}s`),(0,_.IY)("DELETE")).subscribe(t=>{this.navigationService.back()})}}tabBarTabOnPress(t){switch(this.global.selectedIndex=t.index,t.index){case 0:this.global.entity="Request",this.router.navigate(["home/requests"]);break;case 1:this.global.entity="Task",this.router.navigate(["home/tasks"]);break;case 2:this.global.entity="Milestone",this.router.navigate(["home/milestones"])}}ngOnDestroy(){this.requestSubscription&&this.requestSubscription.unsubscribe(),this.taskSubscription&&this.taskSubscription.unsubscribe(),this.milestoneSubscription&&this.milestoneSubscription.unsubscribe(),this.authSubscription&&this.authSubscription.unsubscribe(),this.notifierSubscription&&this.notifierSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(Z.i),e.Y36(S.o),e.Y36(y.Z),e.Y36(x.R),e.Y36(k.l),e.Y36(O.$),e.Y36(V.U),e.Y36(C.P),e.Y36(w.Y),e.Y36(T.l),e.Y36(J.T),e.Y36(Q.f),e.Y36(_.kt),e.Y36(c.Z7),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-entity"]],decls:65,vars:56,consts:[[1,"new-entity-container"],[3,"icon","mode","rightContent"],["nav_bar_arrow",""],["nav_bar_submit",""],[1,"nec-body"],[1,"nec-modal"],["model",""],["class","req-list-item-header",4,"ngIf"],[1,"nec-modal-body"],[1,"nec-editor"],["class","nec-markdown-editor","placeholder","Say Something",3,"tagArray","mentionArray","enableMenu","jsonContent","selectedMention","jsonContentChange","content","selectedTag",4,"ngIf"],[1,"nec-modal-footer"],["class","first-element",4,"ngIf"],[1,"req-list-item-footer"],[1,"rlth-time-user"],["nz-button","","nz-dropdown","",1,"del-associate-btn","add-associate-btn-border",3,"ngStyle","nzPlacement","click"],["alt","Add",1,"button-icon","del-associate-img",3,"src"],[1,"del-associate-text"],[1,"associatedDiv"],[1,"nec-model-entities-div"],[1,"associate-div-segmented"],[1,"ad-segmented-control",3,"tintColor","values"],["taskSegment",""],["nz-button","",1,"add-associate-btn",3,"click"],["alt","Add",1,"button-icon","add-associate-img",3,"src"],[1,"add-associate-text"],["class","nec-model-entity-container",4,"ngIf"],["tabBarPosition","bottom",1,"home-tab-bar",3,"activeTab","tintColor","unselectedTintColor","onPress"],["title","Home","key","1",3,"icon","selectedIcon"],["home_icon",""],["title","Tasks","key","2",3,"icon","selectedIcon"],["task_icon",""],["title","Milestones","key","3",3,"icon","selectedIcon"],["milestone_icon",""],["title","Account","key","4",3,"icon","selectedIcon"],["account_icon",""],[1,"modal",3,"ngModel","transparent","maskClosable","ngModelChange"],[3,"sourceId","multiSelect","preselect","type","selectedList","closed",4,"ngIf"],["appBackButton","",1,"material-symbols-rounded","button-icon"],["Button","",1,"button-icon","button-feel-accent",2,"margin-right","4px",3,"type","disabled","ngStyle","inline","size","click"],[1,"req-list-item-header"],[1,"rlth-time"],[1,"material-symbols-rounded","rlth-time-icon"],["alt","",1,"rlth-time-icon",3,"src"],[1,"rlth-time-div"],[1,"rlth-time-text"],[3,"size"],["placeholder","Say Something",1,"nec-markdown-editor",3,"tagArray","mentionArray","enableMenu","jsonContent","selectedMention","jsonContentChange","content","selectedTag"],[1,"first-element"],["name","Category",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Severity",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Module",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Priority",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],["name","Status",1,"nec-entity-fields",3,"options","defaultValue","defaultValueChange"],[1,"nec-model-entity-container"],["style","background-color: transparent; margin-top: 6px;",3,"autoClose","right","onOpen","onClose",4,"ngFor","ngForOf"],[2,"background-color","transparent","margin-top","6px",3,"autoClose","right","onOpen","onClose"],[1,"task-list-item",3,"disabled","size","flTask"],["class","task-list-item",3,"disabled","size","request",4,"ngFor","ngForOf"],[1,"task-list-item",3,"disabled","size","request"],["class","task-list-item",3,"size","flMilestone",4,"ngFor","ngForOf"],[1,"task-list-item",3,"size","flMilestone"],["class","task-list-item",3,"disabled","size","flTask",4,"ngFor","ngForOf"],[1,"material-symbols-rounded"],[3,"sourceId","multiSelect","preselect","type","selectedList","closed"]],template:function(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",0)(1,"Navbar",1),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.YNc(4,H,2,0,"ng-template",null,2,e.W1O),e.YNc(6,$,2,7,"ng-template",null,3,e.W1O),e.TgZ(8,"div",4)(9,"div",5,6),e.YNc(11,R,11,7,"header",7),e.TgZ(12,"div",8)(13,"div",9),e.YNc(14,B,1,4,"markdown-editor",10),e.YNc(15,D,1,4,"markdown-editor",10),e.YNc(16,W,1,4,"markdown-editor",10),e.qZA()(),e.TgZ(17,"div",11),e.YNc(18,K,4,6,"div",12),e.YNc(19,X,4,6,"div",12),e.YNc(20,G,2,2,"div",12),e.TgZ(21,"footer",13)(22,"span",14),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"div",14)(26,"div",15),e.NdJ("click",function(){return i.showDeleteAlert()}),e._UZ(27,"img",16),e.ALo(28,"categoryImgPath"),e.TgZ(29,"span",17),e._uU(30,"Delete"),e.qZA()()()()()(),e.TgZ(31,"div",18)(32,"div",19)(33,"div",20),e._UZ(34,"SegmentedControl",21,22),e.TgZ(36,"div",14)(37,"div",23),e.NdJ("click",function(){e.CHM(s);const l=e.MAs(35);return i.showEntityModal(l.selectedIndex)}),e._UZ(38,"img",24),e.ALo(39,"categoryImgPath"),e.TgZ(40,"span",25),e._uU(41,"Add"),e.qZA()()()(),e.YNc(42,te,3,3,"div",26),e.YNc(43,ne,3,3,"div",26),e.YNc(44,ae,3,5,"div",26),e.YNc(45,le,3,3,"div",26),e.qZA()()(),e.TgZ(46,"TabBar",27),e.NdJ("onPress",function(l){return i.tabBarTabOnPress(l)}),e.TgZ(47,"TabBarItem",28),e.YNc(48,ce,2,0,"ng-template",null,29,e.W1O),e.qZA(),e.TgZ(50,"TabBarItem",30),e.YNc(51,de,2,0,"ng-template",null,31,e.W1O),e.qZA(),e.TgZ(53,"TabBarItem",32),e.YNc(54,pe,2,0,"ng-template",null,33,e.W1O),e.qZA(),e.TgZ(56,"TabBarItem",34),e.YNc(57,ue,2,0,"ng-template",null,35,e.W1O),e.qZA()(),e.TgZ(59,"Modal",36),e.NdJ("ngModelChange",function(l){return i.showRequestModel=l}),e.YNc(60,_e,1,4,"app-add-associate",37),e.qZA(),e.TgZ(61,"Modal",36),e.NdJ("ngModelChange",function(l){return i.showTaskModel=l}),e.YNc(62,me,1,4,"app-add-associate",37),e.qZA(),e.TgZ(63,"Modal",36),e.NdJ("ngModelChange",function(l){return i.showMilestoneModel=l}),e.YNc(64,he,1,4,"app-add-associate",37),e.qZA()()}if(2&t){const s=e.MAs(5),o=e.MAs(7),l=e.MAs(35),p=e.MAs(49),u=e.MAs(52),h=e.MAs(55),g=e.MAs(58);e.xp6(1),e.Q6J("icon",s)("mode","light")("rightContent",o),e.xp6(1),e.hij(" ",e.lcZ(3,45,i.entity)," "),e.xp6(9),e.Q6J("ngIf",i.createdUser),e.xp6(3),e.Q6J("ngIf",i.request.content),e.xp6(1),e.Q6J("ngIf",i.task.content),e.xp6(1),e.Q6J("ngIf",i.milestone.content),e.xp6(2),e.Q6J("ngIf","request"===i.entity),e.xp6(1),e.Q6J("ngIf","task"===i.entity),e.xp6(1),e.Q6J("ngIf","milestone"===i.entity),e.xp6(3),e.hij(" Last Updated . ",e.xi3(24,47,i.entityObj.updatedAt,"h:mm a . MMM d, y")," "),e.xp6(3),e.Q6J("ngStyle",e.VKq(54,E,i.canUserEdit()?1:.5))("nzPlacement","bottomLeft"),e.xp6(1),e.Q6J("src",e.lcZ(28,50,"delete.svg"),e.LSH),e.xp6(7),e.Q6J("tintColor","#E9EDFF")("values",i.getSegmentValues()),e.xp6(4),e.Q6J("src",e.lcZ(39,52,"fl-add.png"),e.LSH),e.xp6(4),e.Q6J("ngIf","request"===i.entity&&i.request.associatedTasks&&0===l.selectedIndex),e.xp6(1),e.Q6J("ngIf","task"===i.entity&&i.task.requests&&0===l.selectedIndex),e.xp6(1),e.Q6J("ngIf","task"===i.entity&&i.task.associatedMilestone&&1===l.selectedIndex),e.xp6(1),e.Q6J("ngIf","milestone"===i.entity&&i.milestone.tasks&&0===l.selectedIndex),e.xp6(1),e.Q6J("activeTab",i.global.selectedIndex)("tintColor","var(--accent-text-color)")("unselectedTintColor","var(--extra-dim-text-color)"),e.xp6(1),e.Q6J("icon",p)("selectedIcon",p),e.xp6(3),e.Q6J("icon",u)("selectedIcon",u),e.xp6(3),e.Q6J("icon",h)("selectedIcon",h),e.xp6(3),e.Q6J("icon",g)("selectedIcon",g),e.xp6(3),e.Q6J("ngModel",i.showRequestModel)("transparent",!0)("maskClosable",!0),e.xp6(1),e.Q6J("ngIf",i.showRequestModel),e.xp6(1),e.Q6J("ngModel",i.showTaskModel)("transparent",!0)("maskClosable",!0),e.xp6(1),e.Q6J("ngIf",i.showTaskModel),e.xp6(1),e.Q6J("ngModel",i.showMilestoneModel)("transparent",!0)("maskClosable",!0),e.xp6(1),e.Q6J("ngIf",i.showMilestoneModel)}},directives:[c.w5,I.z,c.r0,d.PC,d.O5,c.yG,U.k1,P.I,b.wA,b.cm,c.d5,d.sg,c.$n,M.T,v.U,q.T,c.pu,c._i,c.zS,A.JJ,A.On,z],pipes:[d.rS,d.uU,F.I,d.Ov],styles:[".new-entity-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:transparent;display:flex;flex-direction:column}.nec-body[_ngcontent-%COMP%]{width:100%;flex:1;overflow:scroll}.home-tab-bar[_ngcontent-%COMP%]{flex:1}.nec-loader[_ngcontent-%COMP%]{height:30%}.nec-modal-header[_ngcontent-%COMP%], .second-element[_ngcontent-%COMP%]{padding:12px;display:flex;min-height:45px;max-height:50px;justify-content:space-between;align-items:center}.nec-modal-body[_ngcontent-%COMP%]{overflow-y:auto}.nec-modal-footer[_ngcontent-%COMP%] > .second-element[_ngcontent-%COMP%]{border-top:1px solid var(--border-bottom)}.nec-modal-div[_ngcontent-%COMP%]{display:flex;align-items:center}.arrow-span[_ngcontent-%COMP%]{margin:0 12px;color:gray}.nec-close-btn[_ngcontent-%COMP%]{color:gray}.nec-post-btn[_ngcontent-%COMP%]{font-size:1rem;padding:8px 12px;border-radius:16px}.first-element[_ngcontent-%COMP%]{display:flex;padding-top:12px;padding-bottom:12px;column-gap:16px}.req-list-item-header[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center;align-content:center}.rlth-time[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%!important}.rlth-time-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin-right:6px;text-align:center;display:flex;justify-content:center;align-items:center}.rlth-time-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto}.rlth-time-icon-min[_ngcontent-%COMP%]{width:11px;height:11px}.rlth-time-icon-space[_ngcontent-%COMP%]{margin-left:8px}.rlth-time-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;max-width:100%;font-size:1rem;margin-left:6px}.rlth-time-div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.rlth-time-text[_ngcontent-%COMP%]{font-size:1rem;text-transform:capitalize}.rlth-time-user[_ngcontent-%COMP%]{font-size:.9rem;font-weight:350;color:var(--dim-text-color);text-align:center;display:flex;align-items:center;overflow:hidden;text-overflow:ellipsis;max-width:calc(90vw - 50px)}.rlth-time-user-min[_ngcontent-%COMP%]{font-size:.7rem}.rlth-time-user-black[_ngcontent-%COMP%]{color:#000!important}.req-list-item-footer[_ngcontent-%COMP%]{flex:1;padding-top:6px;display:flex;justify-content:space-between;align-items:center}.add-associate-img[_ngcontent-%COMP%]{width:12px;height:12px;margin:auto}.add-associate-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 16px;background-color:var(--accent-bg-color);color:var(--accent-text-color);border-radius:5px}.add-associate-text[_ngcontent-%COMP%]{margin-left:6px}.del-associate-img[_ngcontent-%COMP%]{width:12px;height:12px;margin:auto}.nec-model-request[_ngcontent-%COMP%]{width:100%;padding:12px 3px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;font-weight:350}.task-list-item[_ngcontent-%COMP%]   .rlth-minsize[_ngcontent-%COMP%]{background-color:var(--dim-bg-color)}.nec-model-entity[_ngcontent-%COMP%]{padding:16px}.nec-model-entity-container[_ngcontent-%COMP%]{padding:8px 16px 16px}.associate-div-segmented[_ngcontent-%COMP%]{padding:16px 16px 8px;display:flex;justify-content:space-between}"]}),n})();var fe=r(5268);const ye=[{path:":entity/:id",component:ge}];let xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[fe.m,m.Bz.forChild(ye)]]}),n})()}}]);