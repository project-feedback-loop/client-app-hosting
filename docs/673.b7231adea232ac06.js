"use strict";(self.webpackChunkfeedback_loop_client=self.webpackChunkfeedback_loop_client||[]).push([[673],{5673:(X,f,l)=>{l.r(f),l.d(f,{MilestoneModule:()=>D});var r=l(9808),p=l(2626),u=(()=>{return(n=u||(u={})).YetToStart="Yet To Start",n.InDiscussion="In Discussion",n.InProgress="In Progress",n.Completed="Completed",n.Testing="Testing",n.Released="Released",u;var n})(),e=l(5e3),M=l(9033),Z=l(3616),v=l(4419),c=l(9352),x=l(4817),w=l(2712),m=l(2382),C=l(6762),T=l(53);function k(n,o){1&n&&(e.TgZ(0,"span",14),e._uU(1," arrow_back "),e.qZA())}function y(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitMilestone()}),e._uU(1,"Submit"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("type","primary")("disabled",!t.submitMode)("inline",!0)("size","small")}}function b(n,o){1&n&&e._UZ(0,"app-task-list-item",16),2&n&&e.Q6J("flTask",o.$implicit)}function A(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-associate",17),e.NdJ("closed",function(){return e.CHM(t),e.oxw().closeModal()})("selectedList",function(s){return e.CHM(t),e.oxw().getSelectedTasks(s)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("multiSelect",!0)("preselect",t.selectedList)}}let J=(()=>{class n{constructor(t,i,s,a,h){this.milestoneService=t,this.route=i,this.activeRoute=s,this.authQuery=a,this.taskQuery=h,this.showModal=!1,this.milestone={},this.selectedList=[],this.submitMode=!1,this.activeRoute.queryParams.subscribe(g=>{g.id&&this.selectedList.push(g.id)})}ngOnInit(){}submitMilestone(){this.submitMode&&(this.milestone={title:this.title,status:u.YetToStart,tasks:this.selectedList.length>0?this.selectedList:null,createdByUser:this.authQuery.user.id},this.milestoneService.addMilestone(this.milestone),this.route.navigate(["/home/milestones"]))}editing(){this.submitMode=!!this.title}openModal(){this.showModal=!0}closeModal(){this.showModal=!1}getSelectedTasks(t){t&&(this.selectedList=t)}getAssociateTasks(){return null==this.milestone.tasks&&(this.milestone.tasks=[]),this.taskQuery.selectMany(this.milestone.tasks)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.l),e.Y36(p.F0),e.Y36(p.gz),e.Y36(Z.i),e.Y36(v.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-milestone"]],decls:27,vars:16,consts:[[1,"new-req-body"],[3,"icon","mode","rightContent"],["nav_bar_arrow",""],["nav_bar_submit",""],[1,"new-req-container"],[3,"size"],[1,"timeline-options-container"],[1,"timeline-title-span"],["type","text",1,"timeline-sub-container",3,"ngModel","keyup","ngModelChange"],["Button","","size","small",1,"button-icon",2,"margin-right","4px",3,"type","inline","size","click"],[1,"timeline-sub-container"],[3,"flTask",4,"ngFor","ngForOf"],[1,"modal",3,"ngModel","transparent","maskClosable","ngModelChange","onClose"],["type","task",3,"multiSelect","preselect","closed","selectedList",4,"ngIf"],["appBackButton","",1,"material-symbols-rounded","button-icon"],["Button","",1,"button-icon",2,"margin-right","4px",3,"type","disabled","inline","size","click"],[3,"flTask"],["type","task",3,"multiSelect","preselect","closed","selectedList"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"Navbar",1),e._uU(2," New Milestone "),e.qZA(),e.YNc(3,k,2,0,"ng-template",null,2,e.W1O),e.YNc(5,y,2,4,"ng-template",null,3,e.W1O),e.TgZ(7,"div",4),e._UZ(8,"WhiteSpace",5),e.TgZ(9,"WingBlank",5)(10,"nz-timeline")(11,"nz-timeline-item")(12,"div",6)(13,"span",7),e._uU(14,"Title"),e.qZA()(),e.TgZ(15,"input",8),e.NdJ("keyup",function(){return i.editing()})("ngModelChange",function(a){return i.title=a}),e.qZA()(),e.TgZ(16,"nz-timeline-item")(17,"div",6)(18,"span",7),e._uU(19,"Associated Tasks"),e.qZA(),e.TgZ(20,"div",9),e.NdJ("click",function(){return i.openModal()}),e._uU(21,"Add"),e.qZA()(),e.TgZ(22,"div",10),e.YNc(23,b,1,1,"app-task-list-item",11),e.ALo(24,"async"),e.qZA()()()()(),e.TgZ(25,"Modal",12),e.NdJ("ngModelChange",function(a){return i.showModal=a})("onClose",function(){return i.closeModal()}),e.YNc(26,A,1,2,"app-add-associate",13),e.qZA()()),2&t){const s=e.MAs(4),a=e.MAs(6);e.xp6(1),e.Q6J("icon",s)("mode","light")("rightContent",a),e.xp6(7),e.Q6J("size","md"),e.xp6(1),e.Q6J("size","md"),e.xp6(6),e.Q6J("ngModel",i.title),e.xp6(5),e.Q6J("type","primary")("inline",!0)("size","small"),e.xp6(3),e.Q6J("ngForOf",e.lcZ(24,14,i.getAssociateTasks())),e.xp6(2),e.Q6J("ngModel",i.showModal)("transparent",!0)("maskClosable",!0),e.xp6(1),e.Q6J("ngIf",i.showModal)}},directives:[c.w5,x.z,c.r0,c.yG,c.gx,w.PD,w.Zv,m.Fj,m.JJ,m.On,r.sg,C.T,c.zS,r.O5,T.W],pipes:[r.Ov],styles:[".new-req-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:100%;height:100%;overflow:hidden}Navbar[_ngcontent-%COMP%]{flex:1;min-height:50px;max-height:50px;z-index:10}.new-req-container[_ngcontent-%COMP%]{overflow:scroll;flex:1;width:100%;height:calc(100% - 50px)}nz-timeline[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{outline:none;border:1px solid transparent;width:100%}"]}),n})();var N=l(5861),z=l(6101),Q=l(9565),O=l(3455),U=l(4342);function q(n,o){1&n&&(e.TgZ(0,"span",10),e._uU(1," arrow_back "),e.qZA())}function S(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).toggleButtonValue()}),e._uU(1,"Edit"),e.qZA()}2&n&&e.Q6J("type","primary")("inline",!0)("size","small")}function I(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateMilestone()}),e._uU(1,"Submit"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("type","primary")("disabled",t.compareChanges())("inline",!0)("size","small")}}function Y(n,o){if(1&n&&(e.YNc(0,S,2,3,"div",11),e.YNc(1,I,2,4,"div",12)),2&n){const t=e.oxw();e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode)}}function V(n,o){if(1&n&&(e.TgZ(0,"span",28)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.milestone?null:t.milestone.title)}}function L(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",29)(1,"input",30),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(2).milestone.title=s}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.milestone.title)}}function F(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openModal()}),e._uU(1,"Add"),e.qZA()}2&n&&e.Q6J("type","primary")("inline",!0)("size","small")}function P(n,o){if(1&n&&e._UZ(0,"app-task-list-item",31),2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("flTask",t)("size",i.min)}}function B(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Data"),e.qZA())}function E(n,o){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"span",17)(3,"span",18),e._uU(4," info "),e.qZA(),e._uU(5," General Information "),e.qZA(),e.TgZ(6,"span",19),e._uU(7,"Posted By"),e.qZA(),e.TgZ(8,"span",20)(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"span",19),e._uU(12,"Created At"),e.qZA(),e.TgZ(13,"span",20)(14,"span"),e._uU(15),e.ALo(16,"date"),e.qZA()(),e.TgZ(17,"span",19),e._uU(18,"Status"),e.qZA(),e.TgZ(19,"span",20)(20,"span"),e._uU(21),e.qZA()(),e.TgZ(22,"span",19),e._uU(23,"Progress"),e.qZA(),e.TgZ(24,"div",21),e._UZ(25,"nz-progress",22),e.ALo(26,"number"),e.qZA()(),e.TgZ(27,"div",16)(28,"span",17)(29,"span",18),e._uU(30," description "),e.qZA(),e._uU(31," Title "),e.qZA(),e.YNc(32,V,3,1,"span",23),e.YNc(33,L,2,1,"div",24),e.qZA(),e.TgZ(34,"div",16)(35,"div",25)(36,"span",17)(37,"span",18),e._uU(38," task "),e.qZA(),e._uU(39," Associated Task "),e.qZA(),e.YNc(40,F,2,3,"div",11),e.qZA(),e.TgZ(41,"div",20),e.YNc(42,P,1,2,"app-task-list-item",26),e.ALo(43,"async"),e.YNc(44,B,2,0,"span",27),e.qZA()()()),2&n){const t=e.oxw();e.xp6(10),e.Oqu("support@app-studio.io"),e.xp6(5),e.Oqu(e.lcZ(16,11,null==t.milestone?null:t.milestone.createdAt)),e.xp6(6),e.Oqu(null==t.milestone?null:t.milestone.status),e.xp6(4),e.Q6J("nzStrokeColor","var(--accent-text-color)")("nzPercent",e.lcZ(26,13,t.milestone.percentage))("nzShowInfo",!0),e.xp6(7),e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode),e.xp6(7),e.Q6J("ngIf",t.editMode),e.xp6(2),e.Q6J("ngForOf",e.lcZ(43,15,t.getAssociatedTasks())),e.xp6(2),e.Q6J("ngIf",0==t.getAssociatedTaskArray().length)}}function R(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-associate",32),e.NdJ("closed",function(){return e.CHM(t),e.oxw().closeModal()})("selectedList",function(s){return e.CHM(t),e.oxw().getSelectedTasks(s)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("sourceId",t.getSourceId())("multiSelect",!0)("preselect",t.milestone.tasks)}}const H=[{path:"new",component:J},{path:"view/:id",component:(()=>{class n{constructor(t,i,s,a,h,g,G){this.taskService=t,this.router=i,this.activeRoute=s,this.navigation=a,this.milestoneQuery=h,this.milestoneService=g,this.taskQuery=G,this.milestone={},this.editMode=!1,this.status=Object.values(u),this.showModal=!1,this.min="min",this.milestoneUpdate=!1,this.showLoader=!0,this.activeRoute.params.subscribe(d=>{d.id&&(this.milestoneId=d.id,this.milestoneService.getOne(d.id),this.milestoneSubscription=this.milestoneQuery.selectEntity(d.id).subscribe(_=>{null!=_&&(this.milestone=Object.assign({},_),this.oldMilestone=Object.assign({},_),this.oldMilestone.tasks=[..._.tasks?_.tasks:[]],this.showLoader=!1,null!=this.milestone.tasks&&this.milestone.tasks.forEach($=>{this.taskService.getOne($)}))}))}),s.queryParams.subscribe(d=>{this.editMode=!!d.edit&&d.edit})}ngOnInit(){this.milestone.percentage="0"}updateMilestone(){var t=this;return(0,N.Z)(function*(){t.milestoneUpdate||(null!=t.milestone&&null!=t.milestone.id&&t.milestoneService.updateMilestone(t.milestone.id,t.milestone),t.router.navigate([`/milestone/view/${t.milestone.id}`])),t.navigation.back()})()}toggleButtonValue(){this.router.navigate([this.router.url],{queryParams:{edit:!0}})}compareChanges(){return!!this.milestone&&(this.milestoneUpdate=JSON.stringify(this.oldMilestone)===JSON.stringify(this.milestone),this.milestoneUpdate)}openModal(){this.showModal=!0}closeModal(){this.showModal=!1}getAssociatedTasks(){return null==this.milestone.tasks&&(this.milestone.tasks=[]),this.taskQuery.selectMany(this.milestone.tasks)}getSelectedTasks(t){t&&(this.milestone.tasks=t)}getSourceId(){return this.milestone.id}getAssociatedTaskArray(){var t;return(null===(t=this.milestone)||void 0===t?void 0:t.tasks)?this.milestone.tasks:[]}ngOnDestroy(){this.milestoneSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(z.Y),e.Y36(p.F0),e.Y36(p.gz),e.Y36(Q.f),e.Y36(O.l),e.Y36(M.l),e.Y36(v.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-milestone"]],decls:13,vars:11,consts:[[1,"new-req-body"],[3,"icon","mode","rightContent"],["nav_bar_arrow",""],["nav_bar_submit",""],[1,"new-req-container"],[3,"size"],["class","content_viewer",4,"ngIf"],["text","Loading Milestone",3,"toast","animating"],[1,"modal",3,"ngModel","transparent","maskClosable","ngModelChange","onClose"],["type","task",3,"sourceId","multiSelect","preselect","closed","selectedList",4,"ngIf"],["appBackButton","",1,"material-symbols-rounded","button-icon"],["Button","","size","small","class","button-icon timeline-button",3,"type","inline","size","click",4,"ngIf"],["Button","","class","button-icon","style","margin-right: 4px",3,"type","disabled","inline","size","click",4,"ngIf"],["Button","","size","small",1,"button-icon","timeline-button",3,"type","inline","size","click"],["Button","",1,"button-icon",2,"margin-right","4px",3,"type","disabled","inline","size","click"],[1,"content_viewer"],[1,"timeline-div-container"],[1,"timeline-heading"],[1,"material-symbols-rounded"],[1,"timeline-title-span"],[1,"timeline-sub-container"],[1,"timeline-sub-container","timeline-sub-container-flex"],[3,"nzStrokeColor","nzPercent","nzShowInfo"],["class","timeline-sub-container desc-font",4,"ngIf"],["class","timeline-prop-container",4,"ngIf"],[1,"timeline-options-container"],[3,"flTask","size",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timeline-sub-container","desc-font"],[1,"timeline-prop-container"],[1,"timeline-sub-container",3,"ngModel","ngModelChange"],[3,"flTask","size"],["type","task",3,"sourceId","multiSelect","preselect","closed","selectedList"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"Navbar",1),e._uU(2," Milestone "),e.qZA(),e.YNc(3,q,2,0,"ng-template",null,2,e.W1O),e.YNc(5,Y,2,2,"ng-template",null,3,e.W1O),e.TgZ(7,"div",4),e._UZ(8,"WhiteSpace",5),e.YNc(9,E,45,17,"div",6),e._UZ(10,"ActivityIndicator",7),e.qZA(),e.TgZ(11,"Modal",8),e.NdJ("ngModelChange",function(a){return i.showModal=a})("onClose",function(){return i.closeModal()}),e.YNc(12,R,1,3,"app-add-associate",9),e.qZA()()),2&t){const s=e.MAs(4),a=e.MAs(6);e.xp6(1),e.Q6J("icon",s)("mode","light")("rightContent",a),e.xp6(7),e.Q6J("size","md"),e.xp6(1),e.Q6J("ngIf",!i.showLoader),e.xp6(1),e.Q6J("toast",!0)("animating",i.showLoader),e.xp6(1),e.Q6J("ngModel",i.showModal)("transparent",!0)("maskClosable",!0),e.xp6(1),e.Q6J("ngIf",i.showModal)}},directives:[c.w5,x.z,r.O5,c.r0,c.yG,U.M,m.Fj,m.JJ,m.On,r.sg,C.T,c.dA,c.zS,T.W],pipes:[r.uU,r.JJ,r.Ov],styles:[".new-req-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:100%;width:100%;overflow:hidden}Navbar[_ngcontent-%COMP%]{flex:1;min-height:50px;max-height:50px;z-index:10}.content_viewer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 50px);padding:6px;background-color:var(--dim-bg-color)}.new-req-container[_ngcontent-%COMP%]{overflow:scroll;flex:1;width:100%;height:calc(100% - 50px)}input[_ngcontent-%COMP%]{border:1px solid var(--dim-text-color);padding:.5rem;width:100%}"]}),n})()}];let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(H)],p.Bz]}),n})();var j=l(3926);let D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,W,j.m]]}),n})()}}]);